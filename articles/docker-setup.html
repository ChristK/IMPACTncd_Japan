<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Docker Setup Guide • IMPACTncdJapan</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Docker Setup Guide">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">IMPACTncdJapan</a>

    <small class="nav-text text-default me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fas fa-home fa-lg"></span></a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><h6 class="dropdown-header" data-toc-skip>Getting Started</h6></li>
    <li><a class="dropdown-item" href="../articles/quickstart.html">Quick Start Guide</a></li>
    <li><a class="dropdown-item" href="../articles/installation.html">Installation Guide</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>User Guides</h6></li>
    <li><a class="dropdown-item" href="../articles/running-simulations.html">Running Simulations</a></li>
    <li><a class="dropdown-item" href="../articles/scenario-analysis.html">Scenario Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/docker-setup.html">Docker Setup</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Technical Documentation</h6></li>
    <li><a class="dropdown-item" href="../articles/model-architecture.html">Model Architecture</a></li>
    <li><a class="dropdown-item" href="../articles/technical-appendix.html">Technical Appendix</a></li>
    <li><a class="dropdown-item" href="../articles/extending-model.html">Extending the Model</a></li>
    <li><a class="dropdown-item" href="../articles/troubleshooting.html">Troubleshooting</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Publications</h6></li>
    <li><a class="dropdown-item" href="../articles/publications.html">Scientific Publications</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Tutorials</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ChristK/IMPACTncd_Japan" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Docker Setup Guide</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ChristK/IMPACTncd_Japan/blob/webpage/vignettes/docker-setup.Rmd" class="external-link"><code>vignettes/docker-setup.Rmd</code></a></small>
      <div class="d-none name"><code>docker-setup.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="docker-setup-guide">Docker Setup Guide<a class="anchor" aria-label="anchor" href="#docker-setup-guide"></a>
</h2>
<p>Docker provides the most reliable way to run IMPACTncd-Japan across
different operating systems and ensures reproducible results.</p>
<div class="section level3">
<h3 id="docker-installation">Docker Installation<a class="anchor" aria-label="anchor" href="#docker-installation"></a>
</h3>
<div class="section level4">
<h4 id="windows">Windows<a class="anchor" aria-label="anchor" href="#windows"></a>
</h4>
<ol style="list-style-type: decimal">
<li>Download <a href="https://docs.docker.com/desktop/install/windows-install/" class="external-link">Docker
Desktop for Windows</a>
</li>
<li>Run the installer and follow the setup wizard</li>
<li>Restart your computer when prompted</li>
<li>Launch Docker Desktop and complete the initial setup</li>
</ol>
</div>
<div class="section level4">
<h4 id="macos">macOS<a class="anchor" aria-label="anchor" href="#macos"></a>
</h4>
<ol style="list-style-type: decimal">
<li>Download <a href="https://docs.docker.com/desktop/install/mac-install/" class="external-link">Docker
Desktop for Mac</a>
</li>
<li>Drag Docker to your Applications folder</li>
<li>Launch Docker Desktop and complete the initial setup</li>
</ol>
</div>
<div class="section level4">
<h4 id="linux">Linux<a class="anchor" aria-label="anchor" href="#linux"></a>
</h4>
<p>Install Docker Engine using your distribution’s package manager:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># Ubuntu/Debian</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">sudo</span> apt-get update</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="fu">sudo</span> apt-get install docker-ce docker-ce-cli containerd.io</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="co"># CentOS/RHEL/Fedora</span></span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a><span class="fu">sudo</span> yum install docker-ce docker-ce-cli containerd.io</span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" tabindex="-1"></a><span class="co"># Enable and start Docker service</span></span>
<span id="cb1-9"><a href="#cb1-9" tabindex="-1"></a><span class="fu">sudo</span> systemctl enable docker</span>
<span id="cb1-10"><a href="#cb1-10" tabindex="-1"></a><span class="fu">sudo</span> systemctl start docker</span>
<span id="cb1-11"><a href="#cb1-11" tabindex="-1"></a></span>
<span id="cb1-12"><a href="#cb1-12" tabindex="-1"></a><span class="co"># Add user to docker group (optional, avoids need for sudo)</span></span>
<span id="cb1-13"><a href="#cb1-13" tabindex="-1"></a><span class="fu">sudo</span> usermod <span class="at">-aG</span> docker <span class="va">$USER</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="user-setup-recommended">User Setup (Recommended)<a class="anchor" aria-label="anchor" href="#user-setup-recommended"></a>
</h3>
<p>For most users who want to run simulations without modifying the
model code.</p>
<div class="section level4">
<h4 id="download-setup-script">1. Download Setup Script<a class="anchor" aria-label="anchor" href="#download-setup-script"></a>
</h4>
<p><strong>Windows (PowerShell):</strong></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode powershell"><code class="sourceCode powershell"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co"># Create working directory</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="fu">New-Item</span> <span class="op">-</span>ItemType Directory <span class="op">-</span>Path C<span class="op">:</span>\IMPACTncdJapan <span class="op">-</span>Force</span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="fu">Set-Location</span> C<span class="op">:</span>\IMPACTncdJapan</span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="co"># Download setup script</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="fu">Invoke-WebRequest</span> <span class="op">-</span>Uri <span class="st">"https://raw.githubusercontent.com/ChristK/IMPACTncd_Japan/refs/heads/main/docker_setup/setup_user_docker_env.ps1"</span> <span class="op">-</span>OutFile <span class="st">"setup_user_docker_env.ps1"</span></span></code></pre></div>
<p><strong>Linux/macOS:</strong></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="co"># Create working directory</span></span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> ~/IMPACTncdJapan</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="bu">cd</span> ~/IMPACTncdJapan</span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="co"># Download setup script</span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-O</span> https://raw.githubusercontent.com/ChristK/IMPACTncd_Japan/refs/heads/main/docker_setup/setup_user_docker_env.sh</span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="fu">chmod</span> +x setup_user_docker_env.sh</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="create-scenarios-directory">2. Create Scenarios Directory<a class="anchor" aria-label="anchor" href="#create-scenarios-directory"></a>
</h4>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># Create scenarios directory and download example files</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="fu">mkdir</span> scenarios</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="co"># Download example scenario files</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-o</span> scenarios/simulate_scn.R https://raw.githubusercontent.com/ChristK/IMPACTncd_Japan/refs/heads/main/scenarios/simulate_scn.R</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="ex">curl</span> <span class="at">-o</span> scenarios/sim_design_scn.yaml https://raw.githubusercontent.com/ChristK/IMPACTncd_Japan/refs/heads/main/scenarios/sim_design_scn.yaml</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="configure-simulation">3. Configure Simulation<a class="anchor" aria-label="anchor" href="#configure-simulation"></a>
</h4>
<p>Edit <code>scenarios/sim_design_scn.yaml</code>:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="co"># Adjust these parameters for your system</span></span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a><span class="fu">clusternumber</span><span class="kw">:</span><span class="at"> </span><span class="dv">2</span><span class="co">              # Number of CPU cores (each needs ~12GB RAM)</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="fu">clusternumber_export</span><span class="kw">:</span><span class="at"> </span><span class="dv">2</span><span class="co">       # Cores for export processing</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="fu">output_dir</span><span class="kw">:</span><span class="at"> /path/to/outputs</span><span class="co">  # Where to save results</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="fu">synthpop_dir</span><span class="kw">:</span><span class="at"> /path/to/synthpop</span><span class="co"> # Where to save intermediate files</span></span></code></pre></div>
<p><strong>Important</strong>: Create the output directories before
running:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># Windows</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a><span class="fu">mkdir</span> C:<span class="dt">\I</span>MPACTncdJapan<span class="dt">\o</span>utputs, C:<span class="dt">\I</span>MPACTncdJapan<span class="dt">\s</span>ynthpop</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="co"># Linux/macOS  </span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> ~/IMPACTncdJapan/outputs ~/IMPACTncdJapan/synthpop</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="run-simulation">4. Run Simulation<a class="anchor" aria-label="anchor" href="#run-simulation"></a>
</h4>
<p><strong>Windows (PowerShell):</strong></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode powershell"><code class="sourceCode powershell"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co"># Allow script execution (if needed)</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a><span class="fu">Set-ExecutionPolicy</span> <span class="op">-</span>Scope <span class="kw">Process</span> <span class="op">-</span>ExecutionPolicy Bypass</span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="co"># Run simulation</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="op">.</span>\setup_user_docker_env<span class="op">.</span><span class="fu">ps1</span> <span class="op">-</span>Tag <span class="st">"main"</span> <span class="op">-</span>ScenariosDir <span class="st">"C:\IMPACTncdJapan\scenarios"</span> <span class="op">-</span>SimDesignYaml <span class="st">"C:\IMPACTncdJapan\scenarios\sim_design_scn.yaml"</span> <span class="op">-</span>UseVolumes</span></code></pre></div>
<p><strong>Linux/macOS:</strong></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="ex">./setup_user_docker_env.sh</span> <span class="at">-Tag</span> main <span class="at">-ScenariosDir</span> ~/IMPACTncdJapan/scenarios <span class="at">-SimDesignYaml</span> ~/IMPACTncdJapan/scenarios/sim_design_scn.yaml <span class="at">--UseVolumes</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="inside-the-container">5. Inside the Container<a class="anchor" aria-label="anchor" href="#inside-the-container"></a>
</h4>
<p>Once the container starts, you’ll have a shell prompt. Run your
simulation:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co"># Run the example scenario</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="ex">Rscript</span> ./scenarios/simulate_scn.R</span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="co"># Exit when done</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="bu">exit</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="developer-setup">Developer Setup<a class="anchor" aria-label="anchor" href="#developer-setup"></a>
</h3>
<p>For developers who want to modify the model code or contribute to the
project.</p>
<div class="section level4">
<h4 id="clone-repository">1. Clone Repository<a class="anchor" aria-label="anchor" href="#clone-repository"></a>
</h4>
<div class="sourceCode" id="cb10"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="fu">git</span> clone https://github.com/ChristK/IMPACTncd_Japan.git</span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="bu">cd</span> IMPACTncd_Japan</span></code></pre></div>
</div>
<div class="section level4">
<h4 id="run-development-container">2. Run Development Container<a class="anchor" aria-label="anchor" href="#run-development-container"></a>
</h4>
<p><strong>Windows (PowerShell):</strong></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode powershell"><code class="sourceCode powershell"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="co"># Run with volume mounting for better performance</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a><span class="op">.</span>\docker_setup\setup_dev_docker_env<span class="op">.</span><span class="fu">ps1</span> <span class="op">-</span>UseVolumes</span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" tabindex="-1"></a><span class="co"># Or with direct bind mounts (simpler but slower)</span></span>
<span id="cb11-5"><a href="#cb11-5" tabindex="-1"></a><span class="op">.</span>\docker_setup\setup_dev_docker_env<span class="op">.</span><span class="fu">ps1</span></span></code></pre></div>
<p><strong>Linux/macOS:</strong></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="co"># Run with volume mounting</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a><span class="ex">./docker_setup/setup_dev_docker_env.sh</span> <span class="at">-UseVolumes</span></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" tabindex="-1"></a><span class="co"># Or with bind mounts</span></span>
<span id="cb12-5"><a href="#cb12-5" tabindex="-1"></a><span class="ex">./docker_setup/setup_dev_docker_env.sh</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="development-workflow">3. Development Workflow<a class="anchor" aria-label="anchor" href="#development-workflow"></a>
</h4>
<p>Inside the development container:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co"># Install package in development mode</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="ex">R</span> CMD INSTALL Rpackage/IMPACTncd_Japan_model_pkg</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a><span class="co"># Run tests</span></span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a><span class="ex">Rscript</span> <span class="at">-e</span> <span class="st">"devtools::test('Rpackage/IMPACTncd_Japan_model_pkg')"</span></span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a><span class="co"># Run simulations</span></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="ex">Rscript</span> simulate.R</span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" tabindex="-1"></a><span class="co"># Generate documentation</span></span>
<span id="cb13-11"><a href="#cb13-11" tabindex="-1"></a><span class="ex">Rscript</span> <span class="at">-e</span> <span class="st">"devtools::document('Rpackage/IMPACTncd_Japan_model_pkg')"</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="docker-configuration-options">Docker Configuration Options<a class="anchor" aria-label="anchor" href="#docker-configuration-options"></a>
</h3>
<div class="section level4">
<h4 id="script-parameters">Script Parameters<a class="anchor" aria-label="anchor" href="#script-parameters"></a>
</h4>
<p>Both setup scripts accept these parameters:</p>
<ul>
<li>
<code>-Tag</code>: Docker image tag (default: “main”)</li>
<li>
<code>-ScenariosDir</code>: Path to custom scenarios directory</li>
<li>
<code>-SimDesignYaml</code>: Path to simulation design YAML
file</li>
<li>
<code>-UseVolumes</code>: Use Docker volumes for better I/O
performance</li>
</ul>
</div>
<div class="section level4">
<h4 id="performance-modes">Performance Modes<a class="anchor" aria-label="anchor" href="#performance-modes"></a>
</h4>
<p><strong>Bind Mounts (Default):</strong> - Direct mounting of host
directories - Changes immediately visible on host - Slower I/O on
Windows/macOS - Better for interactive development</p>
<p><strong>Volume Mode (<code>-UseVolumes</code>):</strong> - Copies
data to Docker volumes - Faster I/O performance - Syncs results back to
host after completion - Better for production runs</p>
</div>
</div>
<div class="section level3">
<h3 id="hardware-requirements">Hardware Requirements<a class="anchor" aria-label="anchor" href="#hardware-requirements"></a>
</h3>
<div class="section level4">
<h4 id="minimum-requirements">Minimum Requirements<a class="anchor" aria-label="anchor" href="#minimum-requirements"></a>
</h4>
<ul>
<li>
<strong>CPU</strong>: 2+ cores</li>
<li>
<strong>RAM</strong>: 16GB (allows 1 simulation core)</li>
<li>
<strong>Storage</strong>: 20GB free space</li>
<li>
<strong>Docker</strong>: 4GB memory limit for Docker Desktop</li>
</ul>
</div>
<div class="section level4">
<h4 id="recommended-configuration">Recommended Configuration<a class="anchor" aria-label="anchor" href="#recommended-configuration"></a>
</h4>
<ul>
<li>
<strong>CPU</strong>: 4-8 cores</li>
<li>
<strong>RAM</strong>: 32-64GB</li>
<li>
<strong>Storage</strong>: 100GB+ SSD</li>
<li>
<strong>Docker</strong>: 8GB+ memory limit</li>
</ul>
</div>
<div class="section level4">
<h4 id="resource-planning">Resource Planning<a class="anchor" aria-label="anchor" href="#resource-planning"></a>
</h4>
<table class="table">
<thead><tr class="header">
<th>Cores</th>
<th>RAM Needed</th>
<th>Population Size</th>
<th>Typical Runtime</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>12GB</td>
<td>100K</td>
<td>2-4 hours</td>
</tr>
<tr class="even">
<td>2</td>
<td>24GB</td>
<td>200K</td>
<td>2-4 hours</td>
</tr>
<tr class="odd">
<td>4</td>
<td>48GB</td>
<td>400K</td>
<td>2-4 hours</td>
</tr>
<tr class="even">
<td>8</td>
<td>96GB</td>
<td>800K</td>
<td>2-4 hours</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 id="troubleshooting">Troubleshooting<a class="anchor" aria-label="anchor" href="#troubleshooting"></a>
</h3>
<div class="section level4">
<h4 id="common-issues">Common Issues<a class="anchor" aria-label="anchor" href="#common-issues"></a>
</h4>
<div class="section level5">
<h5 id="docker-not-starting">Docker not starting<a class="anchor" aria-label="anchor" href="#docker-not-starting"></a>
</h5>
<div class="sourceCode" id="cb14"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="co"># Check Docker status</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="ex">docker</span> info</span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a><span class="co"># Restart Docker service (Linux)</span></span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a><span class="fu">sudo</span> systemctl restart docker</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a></span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a><span class="co"># Restart Docker Desktop (Windows/macOS)</span></span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a><span class="co"># Use the system tray/menu bar icon</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="permission-errors-linux">Permission errors (Linux)<a class="anchor" aria-label="anchor" href="#permission-errors-linux"></a>
</h5>
<div class="sourceCode" id="cb15"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="co"># Add user to docker group</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="fu">sudo</span> usermod <span class="at">-aG</span> docker <span class="va">$USER</span></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a><span class="co"># Log out and back in, or run:</span></span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a><span class="ex">newgrp</span> docker</span></code></pre></div>
</div>
<div class="section level5">
<h5 id="memory-issues">Memory issues<a class="anchor" aria-label="anchor" href="#memory-issues"></a>
</h5>
<div class="sourceCode" id="cb16"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="co"># Reduce cores in sim_design.yaml</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a><span class="fu">clusternumber</span><span class="kw">:</span><span class="at"> </span><span class="dv">1</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="fu">clusternumber_export</span><span class="kw">:</span><span class="at"> </span><span class="dv">1</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a><span class="co"># Or reduce population size</span></span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a><span class="fu">pop_size</span><span class="kw">:</span><span class="at"> </span><span class="dv">50000</span></span></code></pre></div>
</div>
<div class="section level5">
<h5 id="network-issues">Network issues<a class="anchor" aria-label="anchor" href="#network-issues"></a>
</h5>
<div class="sourceCode" id="cb17"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="co"># Test Docker Hub connectivity</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a><span class="ex">docker</span> pull hello-world</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="co"># Configure proxy if needed (corporate networks)</span></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="co"># Edit ~/.docker/config.json</span></span></code></pre></div>
</div>
</div>
<div class="section level4">
<h4 id="performance-optimization">Performance Optimization<a class="anchor" aria-label="anchor" href="#performance-optimization"></a>
</h4>
<div class="section level5">
<h5 id="windowsmacos">Windows/macOS<a class="anchor" aria-label="anchor" href="#windowsmacos"></a>
</h5>
<ul>
<li>Enable WSL 2 backend (Windows)</li>
<li>Increase Docker Desktop memory limit</li>
<li>Use <code>-UseVolumes</code> mode for better I/O</li>
<li>Place output directories on fast storage</li>
</ul>
</div>
<div class="section level5">
<h5 id="linux-1">Linux<a class="anchor" aria-label="anchor" href="#linux-1"></a>
</h5>
<ul>
<li>Use native Docker (not Docker Desktop)</li>
<li>Configure storage driver for performance</li>
<li>Use tmpfs for temporary files:</li>
</ul>
<div class="sourceCode" id="cb18"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="co"># In sim_design.yaml</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="fu">temp_dir</span><span class="kw">:</span><span class="at"> /tmp/impactncdjapan</span></span></code></pre></div>
</div>
</div>
<div class="section level4">
<h4 id="advanced-configuration">Advanced Configuration<a class="anchor" aria-label="anchor" href="#advanced-configuration"></a>
</h4>
<div class="section level5">
<h5 id="custom-docker-images">Custom Docker Images<a class="anchor" aria-label="anchor" href="#custom-docker-images"></a>
</h5>
<div class="sourceCode" id="cb19"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="co"># Build custom image with additional packages</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="ex">docker</span> build <span class="at">-t</span> my-impactncdjapan <span class="at">-f</span> docker_setup/Dockerfile.custom .</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="co"># Use custom image</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a><span class="ex">./setup_user_docker_env.sh</span> <span class="at">-Tag</span> my-impactncdjapan</span></code></pre></div>
</div>
<div class="section level5">
<h5 id="clusterhpc-usage">Cluster/HPC Usage<a class="anchor" aria-label="anchor" href="#clusterhpc-usage"></a>
</h5>
<div class="sourceCode" id="cb20"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="co"># Convert Docker image to Singularity</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="ex">singularity</span> pull impactncdjapan.sif docker://chriskypri/impactncdjpn:main</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="co"># Run on cluster</span></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a><span class="ex">singularity</span> exec impactncdjapan.sif Rscript simulate.R</span></code></pre></div>
</div>
</div>
</div>
<div class="section level3">
<h3 id="security-considerations">Security Considerations<a class="anchor" aria-label="anchor" href="#security-considerations"></a>
</h3>
<div class="section level4">
<h4 id="data-protection">Data Protection<a class="anchor" aria-label="anchor" href="#data-protection"></a>
</h4>
<ul>
<li>Docker containers run with limited privileges</li>
<li>Data directories are mounted read-write only as needed</li>
<li>No network services exposed by default</li>
</ul>
</div>
<div class="section level4">
<h4 id="user-permissions">User Permissions<a class="anchor" aria-label="anchor" href="#user-permissions"></a>
</h4>
<ul>
<li>Development containers run as non-root user (UID 1000)</li>
<li>Output files maintain appropriate permissions</li>
<li>No sudo access within containers</li>
</ul>
</div>
<div class="section level4">
<h4 id="network-security">Network Security<a class="anchor" aria-label="anchor" href="#network-security"></a>
</h4>
<ul>
<li>Containers only access necessary external resources</li>
<li>No incoming network connections</li>
<li>Docker images pulled from verified sources</li>
</ul>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Chris Kypridemos and contributors at University of Liverpool Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

<div class="pkgdown-footer-right">
  <p>list(icon = “fab fa-github fa-lg”, href = “<a href="https://github.com/ChristK/IMPACTncd_Japan" class="external-link uri">https://github.com/ChristK/IMPACTncd_Japan</a>”, <code>aria-label</code> = “GitHub”) Licensed under GPL-3</p>
</div>

    </footer>
</div>





  </body>
</html>

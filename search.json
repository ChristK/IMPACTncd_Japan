[{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"docker-setup-guide","dir":"Articles","previous_headings":"","what":"Docker Setup Guide","title":"Docker Setup Guide","text":"Docker provides reliable way run IMPACTncd-Japan across different operating systems ensures reproducible results.","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"windows","dir":"Articles","previous_headings":"Docker Setup Guide > Docker Installation","what":"Windows","title":"Docker Setup Guide","text":"Download Docker Desktop Windows Run installer follow setup wizard Restart computer prompted Launch Docker Desktop complete initial setup","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"macos","dir":"Articles","previous_headings":"Docker Setup Guide > Docker Installation","what":"macOS","title":"Docker Setup Guide","text":"Download Docker Desktop Mac Drag Docker Applications folder Launch Docker Desktop complete initial setup","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"linux","dir":"Articles","previous_headings":"Docker Setup Guide > Docker Installation","what":"Linux","title":"Docker Setup Guide","text":"Install Docker Engine using distribution’s package manager:","code":"# Ubuntu/Debian sudo apt-get update sudo apt-get install docker-ce docker-ce-cli containerd.io  # CentOS/RHEL/Fedora sudo yum install docker-ce docker-ce-cli containerd.io  # Enable and start Docker service sudo systemctl enable docker sudo systemctl start docker  # Add user to docker group (optional, avoids need for sudo) sudo usermod -aG docker $USER"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"user-setup-recommended","dir":"Articles","previous_headings":"Docker Setup Guide","what":"User Setup (Recommended)","title":"Docker Setup Guide","text":"users want run simulations without modifying model code.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"download-setup-script","dir":"Articles","previous_headings":"Docker Setup Guide > User Setup (Recommended)","what":"1. Download Setup Script","title":"Docker Setup Guide","text":"Windows (PowerShell): Linux/macOS:","code":"# Create working directory New-Item -ItemType Directory -Path C:\\IMPACTncdJapan -Force Set-Location C:\\IMPACTncdJapan  # Download setup script Invoke-WebRequest -Uri \"https://raw.githubusercontent.com/ChristK/IMPACTncd_Japan/refs/heads/main/docker_setup/setup_user_docker_env.ps1\" -OutFile \"setup_user_docker_env.ps1\" # Create working directory mkdir -p ~/IMPACTncdJapan cd ~/IMPACTncdJapan  # Download setup script curl -O https://raw.githubusercontent.com/ChristK/IMPACTncd_Japan/refs/heads/main/docker_setup/setup_user_docker_env.sh chmod +x setup_user_docker_env.sh"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"create-scenarios-directory","dir":"Articles","previous_headings":"Docker Setup Guide > User Setup (Recommended)","what":"2. Create Scenarios Directory","title":"Docker Setup Guide","text":"","code":"# Create scenarios directory and download example files mkdir scenarios  # Download example scenario files curl -o scenarios/simulate_scn.R https://raw.githubusercontent.com/ChristK/IMPACTncd_Japan/refs/heads/main/scenarios/simulate_scn.R curl -o scenarios/sim_design_scn.yaml https://raw.githubusercontent.com/ChristK/IMPACTncd_Japan/refs/heads/main/scenarios/sim_design_scn.yaml"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"configure-simulation","dir":"Articles","previous_headings":"Docker Setup Guide > User Setup (Recommended)","what":"3. Configure Simulation","title":"Docker Setup Guide","text":"Edit scenarios/sim_design_scn.yaml: Important: Create output directories running:","code":"# Adjust these parameters for your system clusternumber: 2              # Number of CPU cores (each needs ~12GB RAM) clusternumber_export: 2       # Cores for export processing output_dir: /path/to/outputs  # Where to save results synthpop_dir: /path/to/synthpop # Where to save intermediate files # Windows mkdir C:\\IMPACTncdJapan\\outputs, C:\\IMPACTncdJapan\\synthpop  # Linux/macOS   mkdir -p ~/IMPACTncdJapan/outputs ~/IMPACTncdJapan/synthpop"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"run-simulation","dir":"Articles","previous_headings":"Docker Setup Guide > User Setup (Recommended)","what":"4. Run Simulation","title":"Docker Setup Guide","text":"Windows (PowerShell): Linux/macOS:","code":"# Allow script execution (if needed) Set-ExecutionPolicy -Scope Process -ExecutionPolicy Bypass  # Run simulation .\\setup_user_docker_env.ps1 -Tag \"main\" -ScenariosDir \"C:\\IMPACTncdJapan\\scenarios\" -SimDesignYaml \"C:\\IMPACTncdJapan\\scenarios\\sim_design_scn.yaml\" -UseVolumes ./setup_user_docker_env.sh -Tag main -ScenariosDir ~/IMPACTncdJapan/scenarios -SimDesignYaml ~/IMPACTncdJapan/scenarios/sim_design_scn.yaml --UseVolumes"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"inside-the-container","dir":"Articles","previous_headings":"Docker Setup Guide > User Setup (Recommended)","what":"5. Inside the Container","title":"Docker Setup Guide","text":"container starts, ’ll shell prompt. Run simulation:","code":"# Run the example scenario Rscript ./scenarios/simulate_scn.R  # Exit when done exit"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"developer-setup","dir":"Articles","previous_headings":"Docker Setup Guide","what":"Developer Setup","title":"Docker Setup Guide","text":"developers want modify model code contribute project.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"clone-repository","dir":"Articles","previous_headings":"Docker Setup Guide > Developer Setup","what":"1. Clone Repository","title":"Docker Setup Guide","text":"","code":"git clone https://github.com/ChristK/IMPACTncd_Japan.git cd IMPACTncd_Japan"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"run-development-container","dir":"Articles","previous_headings":"Docker Setup Guide > Developer Setup","what":"2. Run Development Container","title":"Docker Setup Guide","text":"Windows (PowerShell): Linux/macOS:","code":"# Run with volume mounting for better performance .\\docker_setup\\setup_dev_docker_env.ps1 -UseVolumes  # Or with direct bind mounts (simpler but slower) .\\docker_setup\\setup_dev_docker_env.ps1 # Run with volume mounting ./docker_setup/setup_dev_docker_env.sh -UseVolumes  # Or with bind mounts ./docker_setup/setup_dev_docker_env.sh"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"development-workflow","dir":"Articles","previous_headings":"Docker Setup Guide > Developer Setup","what":"3. Development Workflow","title":"Docker Setup Guide","text":"Inside development container:","code":"# Install package in development mode R CMD INSTALL Rpackage/IMPACTncd_Japan_model_pkg  # Run tests Rscript -e \"devtools::test('Rpackage/IMPACTncd_Japan_model_pkg')\"  # Run simulations Rscript simulate.R  # Generate documentation Rscript -e \"devtools::document('Rpackage/IMPACTncd_Japan_model_pkg')\""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"script-parameters","dir":"Articles","previous_headings":"Docker Setup Guide > Docker Configuration Options","what":"Script Parameters","title":"Docker Setup Guide","text":"setup scripts accept parameters: -Tag: Docker image tag (default: “main”) -ScenariosDir: Path custom scenarios directory -SimDesignYaml: Path simulation design YAML file -UseVolumes: Use Docker volumes better /O performance","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"performance-modes","dir":"Articles","previous_headings":"Docker Setup Guide > Docker Configuration Options","what":"Performance Modes","title":"Docker Setup Guide","text":"Bind Mounts (Default): - Direct mounting host directories - Changes immediately visible host - Slower /O Windows/macOS - Better interactive development Volume Mode (-UseVolumes): - Copies data Docker volumes - Faster /O performance - Syncs results back host completion - Better production runs","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"minimum-requirements","dir":"Articles","previous_headings":"Docker Setup Guide > Hardware Requirements","what":"Minimum Requirements","title":"Docker Setup Guide","text":"CPU: 2+ cores RAM: 16GB (allows 1 simulation core) Storage: 20GB free space Docker: 4GB memory limit Docker Desktop","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"recommended-configuration","dir":"Articles","previous_headings":"Docker Setup Guide > Hardware Requirements","what":"Recommended Configuration","title":"Docker Setup Guide","text":"CPU: 4-8 cores RAM: 32-64GB Storage: 100GB+ SSD Docker: 8GB+ memory limit","code":""},{"path":[]},{"path":[]},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"docker-not-starting","dir":"Articles","previous_headings":"Docker Setup Guide > Troubleshooting > Common Issues","what":"Docker not starting","title":"Docker Setup Guide","text":"","code":"# Check Docker status docker info  # Restart Docker service (Linux) sudo systemctl restart docker  # Restart Docker Desktop (Windows/macOS) # Use the system tray/menu bar icon"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"permission-errors-linux","dir":"Articles","previous_headings":"Docker Setup Guide > Troubleshooting > Common Issues","what":"Permission errors (Linux)","title":"Docker Setup Guide","text":"","code":"# Add user to docker group sudo usermod -aG docker $USER  # Log out and back in, or run: newgrp docker"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"memory-issues","dir":"Articles","previous_headings":"Docker Setup Guide > Troubleshooting > Common Issues","what":"Memory issues","title":"Docker Setup Guide","text":"","code":"# Reduce cores in sim_design.yaml clusternumber: 1 clusternumber_export: 1  # Or reduce population size pop_size: 50000"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"network-issues","dir":"Articles","previous_headings":"Docker Setup Guide > Troubleshooting > Common Issues","what":"Network issues","title":"Docker Setup Guide","text":"","code":"# Test Docker Hub connectivity docker pull hello-world  # Configure proxy if needed (corporate networks) # Edit ~/.docker/config.json"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"windowsmacos","dir":"Articles","previous_headings":"Docker Setup Guide > Troubleshooting > Performance Optimization","what":"Windows/macOS","title":"Docker Setup Guide","text":"Enable WSL 2 backend (Windows) Increase Docker Desktop memory limit Use -UseVolumes mode better /O Place output directories fast storage","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"linux-1","dir":"Articles","previous_headings":"Docker Setup Guide > Troubleshooting > Performance Optimization","what":"Linux","title":"Docker Setup Guide","text":"Use native Docker (Docker Desktop) Configure storage driver performance Use tmpfs temporary files:","code":"# In sim_design.yaml temp_dir: /tmp/impactncdjapan"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"custom-docker-images","dir":"Articles","previous_headings":"Docker Setup Guide > Troubleshooting > Advanced Configuration","what":"Custom Docker Images","title":"Docker Setup Guide","text":"","code":"# Build custom image with additional packages docker build -t my-impactncdjapan -f docker_setup/Dockerfile.custom .  # Use custom image ./setup_user_docker_env.sh -Tag my-impactncdjapan"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"clusterhpc-usage","dir":"Articles","previous_headings":"Docker Setup Guide > Troubleshooting > Advanced Configuration","what":"Cluster/HPC Usage","title":"Docker Setup Guide","text":"","code":"# Convert Docker image to Singularity singularity pull impactncdjapan.sif docker://chriskypri/impactncdjpn:main  # Run on cluster singularity exec impactncdjapan.sif Rscript simulate.R"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"data-protection","dir":"Articles","previous_headings":"Docker Setup Guide > Security Considerations","what":"Data Protection","title":"Docker Setup Guide","text":"Docker containers run limited privileges Data directories mounted read-write needed network services exposed default","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"user-permissions","dir":"Articles","previous_headings":"Docker Setup Guide > Security Considerations","what":"User Permissions","title":"Docker Setup Guide","text":"Development containers run non-root user (UID 1000) Output files maintain appropriate permissions sudo access within containers","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/docker-setup.html","id":"network-security","dir":"Articles","previous_headings":"Docker Setup Guide > Security Considerations","what":"Network Security","title":"Docker Setup Guide","text":"Containers access necessary external resources incoming network connections Docker images pulled verified sources","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/extending-model.html","id":"extending-impactncd-japan","dir":"Articles","previous_headings":"","what":"Extending IMPACTncd-Japan","title":"Extending the Model","text":"guide shows extend IMPACTncd-Japan new diseases, risk factors, functionality.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/extending-model.html","id":"architecture-overview","dir":"Articles","previous_headings":"Extending IMPACTncd-Japan","what":"Architecture Overview","title":"Extending the Model","text":"IMPACTncd-Japan uses object-oriented design R6 classes makes extension straightforward. main extension points : New diseases: Add disease models inheriting Disease class New risk factors: Add exposures inheriting Exposure class New functionality: Extend existing classes create new ones Custom calibration: Implement domain-specific calibration procedures","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/extending-model.html","id":"step-1-create-disease-class","dir":"Articles","previous_headings":"Extending IMPACTncd-Japan > Adding a New Disease","what":"Step 1: Create Disease Class","title":"Extending the Model","text":"","code":"# Define new disease class Dementia <- R6::R6Class(\"Dementia\", inherit = Disease,   public = list(     initialize = function() {       super$initialize(\"dementia\")              # Disease-specific parameters       private$.onset_age_min <- 65       private$.has_subclinical_phase <- TRUE       private$.mortality_multiplier <- 2.5     },          # Implement required methods     calculate_incidence = function(population, year, design) {       # Age-specific incidence rates       baseline_rates <- private$.get_baseline_incidence(year)              # Apply risk factor effects       rr_age <- private$.calculate_age_effect(population$age)       rr_sex <- private$.calculate_sex_effect(population$sex)       rr_education <- private$.calculate_education_effect(population$education)       rr_apoe <- private$.calculate_genetic_effect(population$apoe4)              # Combined relative risk       relative_risk <- rr_age * rr_sex * rr_education * rr_apoe              # Calculate individual probabilities       incidence_prob <- baseline_rates[population$age] * relative_risk              return(incidence_prob)     },          apply_case_fatality = function(cases, year, design) {       # Dementia-specific mortality       baseline_cf <- private$.get_baseline_case_fatality(year)              # Modify by severity and care quality       severity_multiplier <- ifelse(cases$dementia_severity == \"severe\", 1.5, 1.0)       care_quality_effect <- design$care_prm$dementia_care_quality              case_fatality <- baseline_cf * severity_multiplier * care_quality_effect              return(case_fatality)     }   ),      private = list(     .onset_age_min = NULL,     .has_subclinical_phase = NULL,     .mortality_multiplier = NULL,          .get_baseline_incidence = function(year) {       # Load or calculate baseline incidence rates by age       # This would typically come from epidemiological data       rates <- c(         rep(0, 64),                    # Ages 0-64: zero risk         seq(0.001, 0.05, length.out = 36)  # Ages 65-100: increasing risk       )       return(rates)     },          .get_baseline_case_fatality = function(year) {       # Baseline case fatality rate       return(0.15)  # 15% annual mortality for dementia patients     },          .calculate_age_effect = function(age) {       # Exponential increase with age after 65       ifelse(age < 65, 0, exp((age - 65) * 0.08))     },          .calculate_sex_effect = function(sex) {       # Higher risk for women       ifelse(sex == 0, 1.0, 1.3)  # 0=male, 1=female     },          .calculate_education_effect = function(education) {       # Protective effect of education       case_when(         education == \"high\" ~ 0.7,         education == \"medium\" ~ 0.85,         education == \"low\" ~ 1.0,         TRUE ~ 1.0       )     },          .calculate_genetic_effect = function(apoe4) {       # APOE4 genetic risk factor       case_when(         apoe4 == 0 ~ 1.0,      # No copies         apoe4 == 1 ~ 3.0,      # One copy         apoe4 == 2 ~ 15.0,     # Two copies (rare)         TRUE ~ 1.0       )     }   ) )"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/extending-model.html","id":"step-2-register-disease","dir":"Articles","previous_headings":"Extending IMPACTncd-Japan > Adding a New Disease","what":"Step 2: Register Disease","title":"Extending the Model","text":"","code":"# Add to disease registry register_disease <- function(design) {   design$diseases[[\"dementia\"]] <- Dementia$new()   return(design) }  # Use in simulation design <- Design$new() design <- register_disease(design)"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/extending-model.html","id":"step-3-add-configuration","dir":"Articles","previous_headings":"Extending IMPACTncd-Japan > Adding a New Disease","what":"Step 3: Add Configuration","title":"Extending the Model","text":"","code":"# In sim_design.yaml diseases:   - CHD   - Stroke   - Diabetes   - COPD   - Lung_cancer   - Dementia  # New disease  # Disease-specific parameters dementia_prm:   onset_age_min: 65   subclinical_duration: 5   genetic_testing: true   care_quality_improvement: 0.02  # 2% annual improvement"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/extending-model.html","id":"step-1-create-exposure-class","dir":"Articles","previous_headings":"Extending IMPACTncd-Japan > Adding a New Risk Factor","what":"Step 1: Create Exposure Class","title":"Extending the Model","text":"","code":"# Define new exposure class Diet <- R6::R6Class(\"Diet\", inherit = Exposure,   public = list(     initialize = function() {       super$initialize(\"diet_quality\")              # Exposure-specific parameters       private$.scale <- \"continuous\"  # continuous, ordinal, or binary       private$.range <- c(0, 100)     # Diet quality score 0-100       private$.unit <- \"score\"     },          simulate_trajectory = function(population, years, design) {       # Initialize diet quality scores       if (!\"diet_quality\" %in% names(population)) {         population$diet_quality <- private$.initialize_diet_scores(population)       }              # Simulate year-by-year changes       for (year in years) {         population$diet_quality <- private$.update_diet_scores(           population, year, design         )       }              return(population)     },          get_disease_effects = function() {       # Return relative risks for associated diseases       list(         CHD = list(           type = \"continuous\",           effect_per_unit = -0.02,    # 2% RR reduction per point           reference_value = 50         ),         Stroke = list(           type = \"continuous\",            effect_per_unit = -0.015,   # 1.5% RR reduction per point           reference_value = 50         ),         Diabetes = list(           type = \"continuous\",           effect_per_unit = -0.025,   # 2.5% RR reduction per point           reference_value = 50         )       )     }   ),      private = list(     .scale = NULL,     .range = NULL,     .unit = NULL,          .initialize_diet_scores = function(population) {       # Initialize based on demographics and other factors       baseline_score <- 50  # Population mean              # Age effects (diet quality improves with age)       age_effect <- (population$age - 40) * 0.2              # Sex effects (women tend to have better diet)       sex_effect <- ifelse(population$sex == 1, 5, 0)              # Education effects       education_effect <- case_when(         population$education == \"high\" ~ 10,         population$education == \"medium\" ~ 5,         population$education == \"low\" ~ 0,         TRUE ~ 0       )              # Random variation       random_effect <- rnorm(nrow(population), 0, 10)              # Combine effects       diet_scores <- baseline_score + age_effect + sex_effect +                      education_effect + random_effect              # Constrain to valid range       diet_scores <- pmax(0, pmin(100, diet_scores))              return(diet_scores)     },          .update_diet_scores = function(population, year, design) {       current_scores <- population$diet_quality              # Secular trends (improving diet over time)       trend_effect <- design$exposure_prm$diet_trend * (year - 2020)              # Age-related changes (small decline with aging)       age_change <- rnorm(nrow(population), -0.1, 0.5)              # Policy interventions       intervention_effect <- private$.apply_interventions(population, year, design)              # Update scores       new_scores <- current_scores + trend_effect + age_change + intervention_effect              # Add random variation       new_scores <- new_scores + rnorm(nrow(population), 0, 1)              # Constrain to valid range       new_scores <- pmax(0, pmin(100, new_scores))              return(new_scores)     },          .apply_interventions = function(population, year, design) {       intervention_effect <- rep(0, nrow(population))              # Check for diet intervention       if (!is.null(design$interventions$diet)) {         intervention <- design$interventions$diet                  if (year >= intervention$start_year) {           # Calculate intervention effect           years_since_start <- year - intervention$start_year           max_effect <- intervention$max_effect                      # Gradual implementation           current_effect <- max_effect *              (1 - exp(-years_since_start / intervention$ramp_years))                      # Apply to covered population           covered <- rbinom(nrow(population), 1, intervention$coverage)           intervention_effect <- covered * current_effect         }       }              return(intervention_effect)     }   ) )"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/extending-model.html","id":"step-2-integration","dir":"Articles","previous_headings":"Extending IMPACTncd-Japan > Adding a New Risk Factor","what":"Step 2: Integration","title":"Extending the Model","text":"","code":"# Register exposure register_diet_exposure <- function(design) {   design$exposures[[\"diet_quality\"]] <- Diet$new()   return(design) }  # Configure in YAML # exposure_prm: #   diet_trend: 0.5  # 0.5 point improvement per year"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/extending-model.html","id":"new-output-formats","dir":"Articles","previous_headings":"Extending IMPACTncd-Japan > Adding Custom Functionality","what":"New Output Formats","title":"Extending the Model","text":"","code":"# Custom export class CustomExporter <- R6::R6Class(\"CustomExporter\",   public = list(     export_policy_summary = function(simulation_results, policy_name) {       # Create policy-specific summary       summary <- simulation_results %>%         filter(scenario == policy_name) %>%         group_by(year, age_group) %>%         summarise(           deaths_averted = sum(deaths_baseline - deaths_scenario),           qalys_gained = sum(qalys_scenario - qalys_baseline),           cost_savings = sum(costs_baseline - costs_scenario)         )              # Export to custom format       write_csv(summary, paste0(\"policy_summary_\", policy_name, \".csv\"))              # Create visualization       plot <- create_policy_plot(summary)       ggsave(paste0(\"policy_impact_\", policy_name, \".png\"), plot)              return(summary)     }   ) )"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/extending-model.html","id":"custom-calibration","dir":"Articles","previous_headings":"Extending IMPACTncd-Japan > Adding Custom Functionality","what":"Custom Calibration","title":"Extending the Model","text":"","code":"# Disease-specific calibration calibrate_dementia <- function(design, target_data) {   # Custom calibration for dementia model   objective_function <- function(params) {     # Update model parameters     design$diseases$dementia$set_parameters(params)          # Run short simulation     results <- run_calibration_simulation(design)          # Calculate distance from targets     distance <- calculate_calibration_distance(results, target_data)          return(distance)   }      # Optimize parameters   optimal_params <- optim(     par = design$diseases$dementia$get_parameters(),     fn = objective_function,     method = \"L-BFGS-B\"   )      return(optimal_params) }"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/extending-model.html","id":"code-organization","dir":"Articles","previous_headings":"Extending IMPACTncd-Japan > Best Practices","what":"Code Organization","title":"Extending the Model","text":"","code":"# Organize extensions in separate files # R/diseases/dementia.R # R/exposures/diet.R   # R/extensions/custom_calibration.R  # Use consistent naming conventions # Classes: PascalCase (e.g., Dementia, DietQuality) # Methods: snake_case (e.g., calculate_incidence) # Parameters: snake_case (e.g., onset_age_min)"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/extending-model.html","id":"testing-extensions","dir":"Articles","previous_headings":"Extending IMPACTncd-Japan > Best Practices","what":"Testing Extensions","title":"Extending the Model","text":"","code":"# Create tests for new functionality test_that(\"Dementia incidence calculation works correctly\", {   # Create test population   test_pop <- data.table(     age = c(60, 70, 80, 90),     sex = c(0, 1, 0, 1),     education = c(\"high\", \"medium\", \"low\", \"high\")   )      # Test incidence calculation   dementia <- Dementia$new()   incidence <- dementia$calculate_incidence(test_pop, 2025, design)      # Verify results   expect_equal(length(incidence), nrow(test_pop))   expect_true(all(incidence >= 0))   expect_true(all(incidence <= 1))   expect_true(incidence[1] < incidence[3])  # Age effect })"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/extending-model.html","id":"documentation","dir":"Articles","previous_headings":"Extending IMPACTncd-Japan > Best Practices","what":"Documentation","title":"Extending the Model","text":"","code":"#' Dementia Disease Model #' #' Implements dementia incidence and progression modeling for the  #' IMPACTncd-Japan framework. #' #' @section Risk Factors: #' The model incorporates the following risk factors: #' \\itemize{ #'   \\item Age (exponential increase after 65) #'   \\item Sex (higher risk for women) #'   \\item Education (protective effect) #'   \\item APOE4 genetic variant #' } #' #' @examples #' \\dontrun{ #' dementia <- Dementia$new() #' design$diseases[[\"dementia\"]] <- dementia #' } #' #' @export Dementia <- R6::R6Class(...)"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/extending-model.html","id":"performance-considerations","dir":"Articles","previous_headings":"Extending IMPACTncd-Japan > Best Practices","what":"Performance Considerations","title":"Extending the Model","text":"","code":"# Optimize for large populations calculate_incidence = function(population, year, design) {   # Use vectorized operations   baseline_rates <- private$.baseline_rates[population$age + 1]      # Pre-calculate effects   effects <- data.table(     age_effect = private$.age_effects[population$age + 1],     sex_effect = private$.sex_effects[population$sex + 1],     education_effect = private$.education_effects[population$education]   )      # Vectorized calculation   relative_risk <- effects$age_effect * effects$sex_effect * effects$education_effect   incidence_prob <- baseline_rates * relative_risk      return(incidence_prob) }"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/extending-model.html","id":"preparing-for-contribution","dir":"Articles","previous_headings":"Extending IMPACTncd-Japan > Contributing Extensions","what":"Preparing for Contribution","title":"Extending the Model","text":"Follow coding standards: Use established patterns Add comprehensive tests: Cover edge cases error conditions Document thoroughly: Include examples parameter descriptions Validate scientifically: Ensure biological/medical plausibility","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/extending-model.html","id":"submission-process","dir":"Articles","previous_headings":"Extending IMPACTncd-Japan > Contributing Extensions","what":"Submission Process","title":"Extending the Model","text":"Fork repository Create feature branch Implement extension Add tests documentation Submit pull request","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/extending-model.html","id":"extension-guidelines","dir":"Articles","previous_headings":"Extending IMPACTncd-Japan > Contributing Extensions","what":"Extension Guidelines","title":"Extending the Model","text":"Modularity: Extensions self-contained Compatibility: Maintain backward compatibility Performance: Consider impact simulation speed Validation: Include calibration validation data","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/installation.html","id":"installation-options","dir":"Articles","previous_headings":"","what":"Installation Options","title":"Installation Guide","text":"IMPACTncd-Japan can used several ways depending needs technical setup.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/installation.html","id":"option-1-docker-recommended","dir":"Articles","previous_headings":"Installation Options","what":"Option 1: Docker (Recommended)","title":"Installation Guide","text":"Docker provides reliable consistent experience across different operating systems.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/installation.html","id":"for-users","dir":"Articles","previous_headings":"Installation Options > Option 1: Docker (Recommended)","what":"For Users","title":"Installation Guide","text":"Use pre-built Docker images running simulations:","code":"# Download the user setup script curl -O https://raw.githubusercontent.com/ChristK/IMPACTncd_Japan/refs/heads/main/docker_setup/setup_user_docker_env.sh  # Make it executable chmod +x setup_user_docker_env.sh  # Run with your scenarios ./setup_user_docker_env.sh -Tag main -ScenariosDir ./scenarios -SimDesignYaml ./scenarios/sim_design.yaml --UseVolumes"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/installation.html","id":"for-developers","dir":"Articles","previous_headings":"Installation Options > Option 1: Docker (Recommended)","what":"For Developers","title":"Installation Guide","text":"development work faster iteration:","code":"# Clone the repository git clone https://github.com/ChristK/IMPACTncd_Japan.git cd IMPACTncd_Japan  # Use the development Docker setup ./docker_setup/setup_dev_docker_env.sh -UseVolumes"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/installation.html","id":"system-requirements","dir":"Articles","previous_headings":"Installation Options > Option 2: Local R Installation","what":"System Requirements","title":"Installation Guide","text":"R: Version 4.1.0 higher Operating System: Linux (Ubuntu 20.04+), macOS (10.15+), Windows 10+ Memory: Minimum 16GB RAM (32GB+ recommended larger simulations) Storage: 50GB+ free space outputs Compiler: C++17 compatible compiler","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/installation.html","id":"core-packages","dir":"Articles","previous_headings":"Installation Options > Option 2: Local R Installation > R Package Dependencies","what":"Core packages","title":"Installation Guide","text":"","code":"install.packages(c(   \"Rcpp\",   \"data.table\",    \"fst\",   \"dqrng\",   \"gamlss\",   \"cowplot\",   \"mc2d\",   \"digest\",   \"R6\",   \"yaml\",   \"foreach\",   \"BH\",   \"igraph\",   \"parallelly\",   \"parallel\" ))"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/installation.html","id":"development-packages","dir":"Articles","previous_headings":"Installation Options > Option 2: Local R Installation > R Package Dependencies","what":"Development packages","title":"Installation Guide","text":"","code":"install.packages(c(   \"devtools\",   \"roxygen2\",   \"pkgdown\",   \"testthat\",   \"knitr\",   \"rmarkdown\" ))"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/installation.html","id":"ckutils-package","dir":"Articles","previous_headings":"Installation Options > Option 2: Local R Installation > R Package Dependencies","what":"CKutils package","title":"Installation Guide","text":"","code":"# Install from GitHub devtools::install_github(\"ChristK/CKutils\")"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/installation.html","id":"building-the-package","dir":"Articles","previous_headings":"Installation Options > Option 2: Local R Installation","what":"Building the Package","title":"Installation Guide","text":"","code":"# Clone and build git clone https://github.com/ChristK/IMPACTncd_Japan.git cd IMPACTncd_Japan/Rpackage/IMPACTncd_Japan_model_pkg  # Build and install R CMD build . R CMD INSTALL IMPACTncdJapan_*.tar.gz"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/installation.html","id":"option-3-hpccluster-environment","dir":"Articles","previous_headings":"Installation Options","what":"Option 3: HPC/Cluster Environment","title":"Installation Guide","text":"high-performance computing environments:","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/installation.html","id":"singularityapptainer","dir":"Articles","previous_headings":"Installation Options > Option 3: HPC/Cluster Environment","what":"Singularity/Apptainer","title":"Installation Guide","text":"","code":"# Convert Docker image to Singularity singularity pull impactncdjapan.sif docker://chriskypri/impactncdjpn:main  # Run simulation singularity exec impactncdjapan.sif Rscript simulate.R"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/installation.html","id":"module-based-systems","dir":"Articles","previous_headings":"Installation Options > Option 3: HPC/Cluster Environment","what":"Module-based Systems","title":"Installation Guide","text":"","code":"# Load required modules (example for typical HPC) module load R/4.3.0 module load gcc/11.2.0 module load openmpi/4.1.0  # Install to user library export R_LIBS_USER=~/R/library mkdir -p $R_LIBS_USER"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/installation.html","id":"test-docker-installation","dir":"Articles","previous_headings":"Installation Options > Verification","what":"Test Docker Installation","title":"Installation Guide","text":"","code":"# Run a minimal test echo \"library(IMPACTncdJapan); packageVersion('IMPACTncdJapan')\" | docker run -i chriskypri/impactncdjpn:main R --vanilla"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/installation.html","id":"test-local-installation","dir":"Articles","previous_headings":"Installation Options > Verification","what":"Test Local Installation","title":"Installation Guide","text":"","code":"# Check package loads correctly library(IMPACTncdJapan)  # Check version packageVersion(\"IMPACTncdJapan\")  # Run basic functionality test # This should create a simple design object design <- Design$new() design$sim_prm$clusternumber <- 1"},{"path":[]},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/installation.html","id":"memory-errors","dir":"Articles","previous_headings":"Installation Options > Troubleshooting > Common Issues","what":"Memory errors","title":"Installation Guide","text":"Reduce clusternumber configuration Increase swap space available RAM Use smaller population sizes testing","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/installation.html","id":"compilation-errors","dir":"Articles","previous_headings":"Installation Options > Troubleshooting > Common Issues","what":"Compilation errors","title":"Installation Guide","text":"Ensure C++17 compiler available Update Rcpp related packages Check system dependencies","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/installation.html","id":"docker-issues","dir":"Articles","previous_headings":"Installation Options > Troubleshooting > Common Issues","what":"Docker issues","title":"Installation Guide","text":"Ensure Docker daemon running Check available disk space Verify network connectivity image pulls","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/installation.html","id":"getting-help","dir":"Articles","previous_headings":"Installation Options > Troubleshooting","what":"Getting Help","title":"Installation Guide","text":"Issues: Report bugs GitHub Issues Documentation: Check wiki Discussions: Use GitHub Discussions","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/installation.html","id":"resource-planning","dir":"Articles","previous_headings":"Installation Options > Performance Optimization","what":"Resource Planning","title":"Installation Guide","text":"CPU cores: core handles ~100,000 individuals Memory: ~12GB RAM per core default settings Storage: Plan 10-50GB output per simulation depending scope","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/installation.html","id":"cluster-optimization","dir":"Articles","previous_headings":"Installation Options > Performance Optimization","what":"Cluster Optimization","title":"Installation Guide","text":"","code":"# Example configuration for cluster runs clusternumber: 32 clusternumber_export: 8  # Fewer cores for export to avoid I/O bottlenecks"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/model-architecture.html","id":"model-architecture","dir":"Articles","previous_headings":"","what":"Model Architecture","title":"Model Architecture","text":"document describes technical architecture IMPACTncd-Japan, including underlying frameworks, data structures, computational approaches.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/model-architecture.html","id":"conceptual-framework","dir":"Articles","previous_headings":"Model Architecture","what":"Conceptual Framework","title":"Model Architecture","text":"IMPACTncd-Japan built microsimulation approach : Individual-level modeling: person synthetic population tracked separately Discrete-time simulation: Population evolves annual time steps Stochastic processes: Random variation incorporated Monte Carlo methods Lifecourse perspective: Tracks individuals young adulthood death","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/model-architecture.html","id":"synthetic-population-generation","dir":"Articles","previous_headings":"Model Architecture > Core Components","what":"1. Synthetic Population Generation","title":"Model Architecture","text":"SynthPop class creates representative population using: Key features: - Marginal distribution matching demographics - Copula-based correlation structure risk factors - Iterative proportional fitting calibration - Cross-validation survey data","code":"# Population synthesis process SynthPop$new(design) %>%   generate_demographics() %>%      # Age, sex distribution   assign_risk_factors() %>%       # Initial BMI, smoking, etc.   calibrate_prevalence() %>%      # Match observed disease prevalence   validate_population()           # Quality checks"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/model-architecture.html","id":"disease-progression-models","dir":"Articles","previous_headings":"Model Architecture > Core Components","what":"2. Disease Progression Models","title":"Model Architecture","text":"disease follows similar pattern implemented Disease class: Disease-specific models: CHD: Competing risks stroke, case-fatality based Monica data Stroke: Separate models ischemic hemorrhagic Diabetes: Type 2 diabetes complications modeling COPD: GOLD stage progression Lung Cancer: Histology-specific survival models","code":"# Generic disease progression Disease$new(\"CHD\") %>%   set_incidence_model(model_type = \"competing_risks\") %>%   set_case_fatality_model(model_type = \"survival\") %>%   set_prevalence_effects() %>%   calibrate_to_targets()"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/model-architecture.html","id":"risk-factor-trajectories","dir":"Articles","previous_headings":"Model Architecture > Core Components","what":"3. Risk Factor Trajectories","title":"Model Architecture","text":"Exposure class models risk factors change time: Modeling approaches: - BMI: Age-period-cohort models drift - Smoking: Discrete state transitions (never/current/former) - Blood pressure: Continuous medication effects - Cholesterol: Linked BMI medication use - Physical activity: Ordered categorical transitions","code":"# Risk factor modeling Exposure$new(\"BMI\") %>%   set_trajectory_model(\"random_walk\") %>%   add_age_effects() %>%   add_cohort_effects() %>%   add_period_effects() %>%   calibrate_trends()"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/model-architecture.html","id":"r6-class-system","dir":"Articles","previous_headings":"Model Architecture > Technical Implementation","what":"R6 Class System","title":"Model Architecture","text":"IMPACTncd-Japan uses R6 object-oriented programming: Benefits: - Encapsulation complex state - Method chaining fluent APIs - Memory efficiency reference semantics - Easy extension inheritance","code":"# Example class structure Design <- R6::R6Class(\"Design\",   public = list(     # Public methods and fields     initialize = function() { ... },     read_yaml = function(file) { ... },     validate = function() { ... }   ),      private = list(     # Private methods and data     .validate_parameters = function() { ... },     .data = NULL   ),      active = list(     # Active bindings (computed properties)     years = function() private$.data$years   ) )"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/model-architecture.html","id":"c-backend","dir":"Articles","previous_headings":"Model Architecture > Technical Implementation","what":"C++ Backend","title":"Model Architecture","text":"Performance-critical components implemented C++ using Rcpp: C++ components: - Random number generation (dqrng) - Matrix operations large populations - Probability calculations - Disease progression algorithms","code":"// Example C++ function // [[Rcpp::export]] NumericVector simulate_trajectory(NumericVector initial_values,                                  NumericMatrix transition_probs,                                  int n_periods) {   // High-performance simulation code   return trajectory; }"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/model-architecture.html","id":"parallel-processing","dir":"Articles","previous_headings":"Model Architecture > Technical Implementation","what":"Parallel Processing","title":"Model Architecture","text":"Multi-core simulation using parallel package: Parallelization strategy: - Population-level parallelism (split individuals across cores) - Scenario-level parallelism (multiple scenarios simultaneously) - Monte Carlo parallelism (multiple runs parallel)","code":"# Parallel execution strategy cluster <- makeCluster(design$sim_prm$clusternumber) clusterEvalQ(cluster, library(IMPACTncdJapan))  # Distribute population chunks across cores population_chunks <- split_population(synthpop, n_cores) results <- parLapply(cluster, population_chunks, simulate_chunk)  # Combine results final_results <- combine_chunk_results(results) stopCluster(cluster)"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/model-architecture.html","id":"population-data","dir":"Articles","previous_headings":"Model Architecture > Data Structures","what":"Population Data","title":"Model Architecture","text":"Stored data.table efficiency:","code":"# Example population structure population <- data.table(   pid = 1:100000,           # Person ID   age = sample(20:100, 100000, replace = TRUE),   sex = sample(0:1, 100000, replace = TRUE),   bmi = rnorm(100000, 25, 4),   smoking = sample(0:2, 100000, replace = TRUE),   # ... other variables   alive = rep(TRUE, 100000),   year_death = rep(NA_integer_, 100000) )"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/model-architecture.html","id":"simulation-state","dir":"Articles","previous_headings":"Model Architecture > Data Structures","what":"Simulation State","title":"Model Architecture","text":"Tracked multiple data structures:","code":"# Simulation state management sim_state <- list(   population = population_dt,         # Current population   disease_history = disease_events,   # Disease onset records     exposure_history = exposure_trajectories,   mortality_records = death_events,   annual_summaries = summary_stats )"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/model-architecture.html","id":"output-organization","dir":"Articles","previous_headings":"Model Architecture > Data Structures","what":"Output Organization","title":"Model Architecture","text":"Hierarchical output structure:","code":"outputs/ ├── mc=1/                    # Monte Carlo iteration 1 │   ├── population_final.fst │   ├── disease_events.fst │   └── mortality.fst ├── mc=2/                    # Monte Carlo iteration 2 │   └── ... └── summaries/               # Aggregated across MC iterations     ├── mortality_trends.csv     ├── disease_incidence.csv     └── exposure_patterns.csv"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/model-architecture.html","id":"target-matching","dir":"Articles","previous_headings":"Model Architecture > Calibration Framework","what":"Target Matching","title":"Model Architecture","text":"Multi-objective calibration process:","code":"# Calibration workflow calibration_targets <- list(   mortality_rates = japanese_mortality_data,   disease_prevalence = nhanes_jp_data,   exposure_distributions = dietary_survey_data )  calibrate_model <- function(parameters) {   # Run short simulation with candidate parameters   results <- quick_simulation(parameters)      # Calculate distance from targets   distance <- calculate_distance(results, calibration_targets)      return(distance) }  # Optimization optimal_params <- optim(   par = initial_parameters,   fn = calibrate_model,   method = \"L-BFGS-B\" )"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/model-architecture.html","id":"validation-metrics","dir":"Articles","previous_headings":"Model Architecture > Calibration Framework","what":"Validation Metrics","title":"Model Architecture","text":"Comprehensive validation multiple data sources:","code":"# Validation framework validation_results <- validate_model(simulation_output) %>%   check_mortality_trends() %>%   check_disease_incidence() %>%   check_exposure_correlations() %>%   check_survival_curves() %>%   generate_validation_report()"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/model-architecture.html","id":"adding-new-diseases","dir":"Articles","previous_headings":"Model Architecture > Extensibility","what":"Adding New Diseases","title":"Model Architecture","text":"Framework designed easy extension:","code":"# Template for new disease NewDisease <- R6Class(\"NewDisease\", inherit = Disease,   public = list(     initialize = function() {       super$initialize(\"new_disease_name\")       # Disease-specific initialization     },          calculate_incidence = function(population, year) {       # Implement disease-specific incidence model     },          apply_case_fatality = function(cases, year) {       # Implement disease-specific mortality     }   ) )"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/model-architecture.html","id":"adding-new-risk-factors","dir":"Articles","previous_headings":"Model Architecture > Extensibility","what":"Adding New Risk Factors","title":"Model Architecture","text":"Similar pattern risk factors:","code":"# Template for new exposure NewExposure <- R6Class(\"NewExposure\", inherit = Exposure,   public = list(     simulate_trajectory = function(population, years) {       # Implement exposure-specific trajectory model     },          get_disease_effects = function() {       # Return relative risks for associated diseases     }   ) )"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/model-architecture.html","id":"memory-management","dir":"Articles","previous_headings":"Model Architecture > Performance Considerations","what":"Memory Management","title":"Model Architecture","text":"Efficient data structures: data.table large datasets Memory monitoring: Automatic garbage collection triggers Streaming /O: Write results incrementally avoid memory limits Compression: Use fst format fast, compressed storage","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/model-architecture.html","id":"computational-optimization","dir":"Articles","previous_headings":"Model Architecture > Performance Considerations","what":"Computational Optimization","title":"Model Architecture","text":"Vectorized operations: Leverage R’s vectorization Sparse matrices: large transition probability matrices Lazy evaluation: Defer expensive calculations possible Caching: Store frequently-accessed computed values","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/model-architecture.html","id":"scalability","dir":"Articles","previous_headings":"Model Architecture > Performance Considerations","what":"Scalability","title":"Model Architecture","text":"Horizontal scaling: Distribute across multiple machines Vertical scaling: Optimize multi-core systems Cloud deployment: Support containerized execution Checkpointing: Save/restore simulation state long runs","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/model-architecture.html","id":"testing-framework","dir":"Articles","previous_headings":"Model Architecture > Quality Assurance","what":"Testing Framework","title":"Model Architecture","text":"Comprehensive test suite using testthat:","code":"# Example test structure test_that(\"Population synthesis produces valid demographics\", {   design <- create_test_design()   synthpop <- SynthPop$new(design)      expect_true(all(synthpop$population$age >= 20))   expect_true(all(synthpop$population$age <= 100))   expect_equal(sum(synthpop$population$sex == 0),                 expected_male_count, tolerance = 100) })"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/model-architecture.html","id":"continuous-integration","dir":"Articles","previous_headings":"Model Architecture > Quality Assurance","what":"Continuous Integration","title":"Model Architecture","text":"Automated testing multiple platforms: Unit tests: Individual function validation Integration tests: Full simulation runs Performance tests: Runtime memory benchmarks Reproducibility tests: Ensure consistent results across runs","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/model-architecture.html","id":"documentation-standards","dir":"Articles","previous_headings":"Model Architecture > Quality Assurance","what":"Documentation Standards","title":"Model Architecture","text":"Roxygen2: Automated documentation generation Vignettes: Comprehensive user guides Code coverage: Monitor test coverage API documentation: Complete function reference","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/publications.html","id":"scientific-publications","dir":"Articles","previous_headings":"","what":"Scientific Publications","title":"Publications","text":"page lists scientific publications describe, validate, use IMPACTncd-Japan model.","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/publications.html","id":"main-model-description","dir":"Articles","previous_headings":"Scientific Publications > Primary Model Publications","what":"Main Model Description","title":"Publications","text":"Kypridemos, C., et al. (2025). IMPACTncd-Japan model: comprehensive microsimulation model cardiovascular disease policy evaluation Japan. Lancet Regional Health - Western Pacific, 54, 101623. DOI: 10.1016/j.lanwpc.2025.101623 Description: primary publication describing IMPACTncd-Japan model, including structure, validation, initial policy applications. Key Features: Model architecture, data sources, validation results, example policy scenarios","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/publications.html","id":"model-framework-and-methodology","dir":"Articles","previous_headings":"Scientific Publications > Primary Model Publications","what":"Model Framework and Methodology","title":"Publications","text":"Kypridemos, C., et al. (2022). Future projections cardiovascular disease mortality potential impact policy interventions Japan: modelling study. Lancet Regional Health - Western Pacific, 29, 100637. DOI: 10.1016/j.lanwpc.2022.100637 Description: Early work cardiovascular disease projections Japan informed development IMPACTncd-Japan model. Key Features: Baseline projections, policy scenario analysis, methodological foundations","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/publications.html","id":"policy-analysis-studies","dir":"Articles","previous_headings":"Scientific Publications > Model Applications","what":"Policy Analysis Studies","title":"Publications","text":"Additional publications using model listed become available.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/publications.html","id":"validation-studies","dir":"Articles","previous_headings":"Scientific Publications > Model Applications","what":"Validation Studies","title":"Publications","text":"Model validation studies comparisons models listed .","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/publications.html","id":"impactncd-framework","dir":"Articles","previous_headings":"Scientific Publications > Related Publications","what":"IMPACTncd Framework","title":"Publications","text":"IMPACTncd-Japan model built broader IMPACTncd framework. Key publications framework include: Framework publications added provide context broader modeling approach.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/publications.html","id":"data-sources-and-methods","dir":"Articles","previous_headings":"Scientific Publications > Related Publications","what":"Data Sources and Methods","title":"Publications","text":"Publications describing key data sources, statistical methods, validation approaches used model: Methodological publications listed .","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/publications.html","id":"technical-documentation","dir":"Articles","previous_headings":"Scientific Publications","what":"Technical Documentation","title":"Publications","text":"detailed technical information model implementation, see: Technical Appendix - Comprehensive technical documentation Model Architecture - High-level model structure design Extending Model - Guide developers researchers","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/publications.html","id":"citing-the-model","dir":"Articles","previous_headings":"Scientific Publications > Citation Guidelines","what":"Citing the Model","title":"Publications","text":"using IMPACTncd-Japan model research, please cite primary model publication:","code":"Kypridemos, C., et al. (2025). The IMPACTncd-Japan model: A comprehensive  microsimulation model for cardiovascular disease policy evaluation in Japan.  The Lancet Regional Health - Western Pacific, 54, 101623.  https://doi.org/10.1016/j.lanwpc.2025.101623"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/publications.html","id":"citing-the-software","dir":"Articles","previous_headings":"Scientific Publications > Citation Guidelines","what":"Citing the Software","title":"Publications","text":"referring software implementation:","code":"Kypridemos, C., et al. (2025). IMPACTncd-Japan: R package for cardiovascular  disease microsimulation in Japan. R package version 0.0.1.  https://github.com/ChristK/IMPACTncd_Japan"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/publications.html","id":"bibtex-entries","dir":"Articles","previous_headings":"Scientific Publications > Citation Guidelines","what":"BibTeX Entries","title":"Publications","text":"","code":"@article{kypridemos2025impact,   title={The IMPACTncd-Japan model: A comprehensive microsimulation model for cardiovascular disease policy evaluation in Japan},   author={Kypridemos, Chris and others},   journal={The Lancet Regional Health - Western Pacific},   volume={54},   pages={101623},   year={2025},   publisher={Elsevier},   doi={10.1016/j.lanwpc.2025.101623} }  @article{kypridemos2022future,   title={Future projections of cardiovascular disease mortality and the potential impact of policy interventions in Japan: A modelling study},   author={Kypridemos, Chris and others},   journal={The Lancet Regional Health - Western Pacific},   volume={29},   pages={100637},   year={2022},   publisher={Elsevier},   doi={10.1016/j.lanwpc.2022.100637} }  @misc{kypridemos2025software,   title={IMPACTncd-Japan: R package for cardiovascular disease microsimulation in Japan},   author={Kypridemos, Chris and Crowther, Peter and Guzman-Castillo, Maria and others},   year={2025},   url={https://github.com/ChristK/IMPACTncd_Japan},   note={R package version 0.0.1} }"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/publications.html","id":"funding","dir":"Articles","previous_headings":"Scientific Publications > Acknowledgments","what":"Funding","title":"Publications","text":"Funding sources acknowledgments listed .","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/publications.html","id":"collaborations","dir":"Articles","previous_headings":"Scientific Publications > Acknowledgments","what":"Collaborations","title":"Publications","text":"IMPACTncd-Japan model developed collaborations : University Liverpool Additional collaborating institutions","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/publications.html","id":"data-sources","dir":"Articles","previous_headings":"Scientific Publications > Acknowledgments","what":"Data Sources","title":"Publications","text":"acknowledge following data sources make model possible: Japanese national health surveys Vital statistics Additional data sources","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/publications.html","id":"contact-for-collaborations","dir":"Articles","previous_headings":"Scientific Publications","what":"Contact for Collaborations","title":"Publications","text":"Researchers interested collaborating using model policy analysis encouraged : Read documentation: Start Quick Start Guide Review publications: Understand model’s capabilities limitations Contact team: Reach via GitHub email","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/publications.html","id":"research-opportunities","dir":"Articles","previous_headings":"Scientific Publications > Contact for Collaborations","what":"Research Opportunities","title":"Publications","text":"welcome collaborations : Policy scenario analysis: Evaluating specific health interventions Model extensions: Adding new diseases risk factors Validation studies: Comparing models real-world data International comparisons: Adapting framework countries","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/publications.html","id":"updates-and-new-publications","dir":"Articles","previous_headings":"Scientific Publications","what":"Updates and New Publications","title":"Publications","text":"page regularly updated new publications become available. current information: GitHub repository: https://github.com/ChristK/IMPACTncd_Japan Package website: https://christk.github.io/IMPACTncd_Japan/ Last updated: August 2025","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/quickstart.html","id":"getting-started-with-impactncd-japan","dir":"Articles","previous_headings":"","what":"Getting Started with IMPACTncd-Japan","title":"Quick Start Guide","text":"IMPACTncd-Japan population microsimulation model built IMPACTncd framework. simulates Japanese adults’ lifecourse, exposure trajectories (e.g., smoking, BMI, blood pressure), disease onset (CHD, stroke, diabetes, etc.), mortality.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/quickstart.html","id":"what-this-model-does","dir":"Articles","previous_headings":"Getting Started with IMPACTncd-Japan","what":"What this model does","title":"Quick Start Guide","text":"Baseline analysis: Quantify trends incidence, prevalence, mortality Policy evaluation: Simulate scenarios changing exposure trends disease case fatality Lifecourse modeling: Track individuals entire health journey Population health impact: Assess interventions population level","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/quickstart.html","id":"quick-start-with-docker","dir":"Articles","previous_headings":"Getting Started with IMPACTncd-Japan","what":"Quick Start with Docker","title":"Quick Start Guide","text":"fastest way get started using pre-built Docker images:","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/quickstart.html","id":"install-docker","dir":"Articles","previous_headings":"Getting Started with IMPACTncd-Japan > Quick Start with Docker","what":"1. Install Docker","title":"Quick Start Guide","text":"Windows/macOS: Install Docker Desktop Linux: Install Docker Engine","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/quickstart.html","id":"download-the-setup-script","dir":"Articles","previous_headings":"Getting Started with IMPACTncd-Japan > Quick Start with Docker","what":"2. Download the setup script","title":"Quick Start Guide","text":"Download appropriate script system: Windows PowerShell: setup_user_docker_env.ps1 Linux/macOS: setup_user_docker_env.sh","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/quickstart.html","id":"create-your-workspace","dir":"Articles","previous_headings":"Getting Started with IMPACTncd-Japan > Quick Start with Docker","what":"3. Create your workspace","title":"Quick Start Guide","text":"","code":"# Create a directory for your work mkdir ~/IMPACTncdJapan cd ~/IMPACTncdJapan  # Create scenarios directory mkdir scenarios  # Download example scenario files curl -o scenarios/simulate_scn.R https://raw.githubusercontent.com/ChristK/IMPACTncd_Japan/refs/heads/main/scenarios/simulate_scn.R curl -o scenarios/sim_design_scn.yaml https://raw.githubusercontent.com/ChristK/IMPACTncd_Japan/refs/heads/main/scenarios/sim_design_scn.yaml"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/quickstart.html","id":"configure-your-simulation","dir":"Articles","previous_headings":"Getting Started with IMPACTncd-Japan > Quick Start with Docker","what":"4. Configure your simulation","title":"Quick Start Guide","text":"Edit scenarios/sim_design_scn.yaml set: clusternumber: Number CPU cores use (needs ~12GB RAM) output_dir: save results synthpop_dir: save intermediate files","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/quickstart.html","id":"run-your-first-simulation","dir":"Articles","previous_headings":"Getting Started with IMPACTncd-Japan > Quick Start with Docker","what":"5. Run your first simulation","title":"Quick Start Guide","text":"","code":"# Make the script executable (Linux/macOS) chmod +x setup_user_docker_env.sh  # Run the container ./setup_user_docker_env.sh -Tag main -ScenariosDir ~/IMPACTncdJapan/scenarios -SimDesignYaml ~/IMPACTncdJapan/scenarios/sim_design_scn.yaml --UseVolumes  # Inside the container, run a test simulation Rscript ./scenarios/simulate_scn.R"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/quickstart.html","id":"what-happens-during-a-simulation","dir":"Articles","previous_headings":"Getting Started with IMPACTncd-Japan","what":"What happens during a simulation","title":"Quick Start Guide","text":"Synthetic population generation: Creates representative population Lifecourse simulation: Models individual trajectories time Disease progression: Simulates onset progression diseases Policy scenarios: Applies interventions measures impact Results export: Generates tables, plots, summary statistics","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/quickstart.html","id":"output-structure","dir":"Articles","previous_headings":"Getting Started with IMPACTncd-Japan","what":"Output structure","title":"Quick Start Guide","text":"Results saved configured output directory: summaries/: Statistical summaries results tables/: Formatted tables publication plots/: Visualization trends comparisons lifecourse/: Individual-level trajectories logs/: Simulation logs diagnostics","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/quickstart.html","id":"next-steps","dir":"Articles","previous_headings":"Getting Started with IMPACTncd-Japan","what":"Next steps","title":"Quick Start Guide","text":"Read Installation Guide local development setup Learn Running Simulations detail Explore Scenario Analysis policy evaluation","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/running-simulations.html","id":"running-simulations","dir":"Articles","previous_headings":"","what":"Running Simulations","title":"Running Simulations","text":"guide covers run simulations IMPACTncd-Japan, basic configurations advanced scenarios.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/running-simulations.html","id":"simulation-overview","dir":"Articles","previous_headings":"Running Simulations","what":"Simulation Overview","title":"Running Simulations","text":"typical simulation involves: Configuration: Set parameters via YAML files Population synthesis: Generate synthetic individuals Lifecourse modeling: Simulate health trajectories Disease progression: Model disease onset progression Output generation: Create tables, plots, summaries","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/running-simulations.html","id":"main-configuration-sim_design-yaml","dir":"Articles","previous_headings":"Running Simulations > Configuration Files","what":"Main Configuration (sim_design.yaml)","title":"Running Simulations","text":"primary configuration file controls aspects simulation:","code":"# Basic simulation parameters mc: 10                    # Number of Monte Carlo iterations years: [2011, 2040]      # Simulation time period init_year: 2011          # Baseline year clusternumber: 4         # CPU cores for simulation clusternumber_export: 2  # CPU cores for output processing  # Population parameters pop_size: 100000         # Synthetic population size age_range: [20, 100]     # Age range to simulate  # Output directories output_dir: ./outputs synthpop_dir: ./synthpop logs_dir: ./logs  # Scenario parameters scenario_name: \"baseline\" scenario_description: \"Baseline trends with no interventions\"  # Disease modules to include diseases:   - CHD   - Stroke     - Diabetes   - COPD   - Lung_cancer  # Risk factor modules exposures:   - BMI   - Smoking   - Blood_pressure   - Cholesterol   - Physical_activity"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/running-simulations.html","id":"advanced-configuration-options","dir":"Articles","previous_headings":"Running Simulations > Configuration Files","what":"Advanced Configuration Options","title":"Running Simulations","text":"","code":"# Calibration settings calibration:   enabled: true   target_year: 2019   tolerance: 0.05   max_iterations: 100  # Scenario interventions interventions:   smoking:     type: \"trend_change\"     start_year: 2025     target_reduction: 0.50  # 50% reduction by 2040        bmi:     type: \"policy_shock\"     implementation_year: 2030     effect_size: -1.5       # Reduce mean BMI by 1.5 kg/m²  # Output customization outputs:   tables:     age_groups: [20, 30, 40, 50, 60, 70, 80]     summary_years: [2020, 2025, 2030, 2035, 2040]      plots:     generate_trends: true     generate_comparisons: true     format: \"png\"     dpi: 300"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/running-simulations.html","id":"basic-simulation","dir":"Articles","previous_headings":"Running Simulations > Running Simulations","what":"Basic Simulation","title":"Running Simulations","text":"","code":"# Load the package library(IMPACTncdJapan)  # Create simulation design from YAML design <- Design$new() design$read_yaml(\"./inputs/sim_design.yaml\")  # Create and run simulation sim <- Simulation$new(design) sim$run()  # Export results sim$export_summaries()"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/running-simulations.html","id":"simulation-with-custom-parameters","dir":"Articles","previous_headings":"Running Simulations > Running Simulations","what":"Simulation with Custom Parameters","title":"Running Simulations","text":"","code":"# Create design with custom parameters design <- Design$new()  # Override specific parameters design$sim_prm$mc <- 5 design$sim_prm$clusternumber <- 2 design$sim_prm$pop_size <- 50000  # Set scenario details design$sim_prm$scenario_name <- \"custom_test\" design$sim_prm$years <- c(2015, 2035)  # Run simulation sim <- Simulation$new(design) sim$run()"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/running-simulations.html","id":"batch-processing-multiple-scenarios","dir":"Articles","previous_headings":"Running Simulations > Running Simulations","what":"Batch Processing Multiple Scenarios","title":"Running Simulations","text":"","code":"# Define multiple scenarios scenarios <- list(   baseline = list(     name = \"baseline\",     smoking_trend = 0,     bmi_intervention = FALSE   ),      smoking_reduction = list(     name = \"smoking_50pct_reduction\",      smoking_trend = -0.5,     bmi_intervention = FALSE   ),      combined_intervention = list(     name = \"smoking_bmi_combined\",     smoking_trend = -0.5,     bmi_intervention = TRUE   ) )  # Run each scenario results <- list() for (scenario in scenarios) {   design <- Design$new()   design$read_yaml(\"./inputs/sim_design_base.yaml\")      # Apply scenario-specific parameters   design$sim_prm$scenario_name <- scenario$name   # ... apply other scenario parameters      sim <- Simulation$new(design)   sim$run()      results[[scenario$name]] <- sim$get_summary() }"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/running-simulations.html","id":"real-time-monitoring","dir":"Articles","previous_headings":"Running Simulations > Monitoring Progress","what":"Real-time Monitoring","title":"Running Simulations","text":"","code":"# Enable progress tracking design$sim_prm$verbose <- TRUE design$sim_prm$progress_freq <- 1000  # Report every 1000 individuals  # Monitor memory usage design$sim_prm$memory_monitoring <- TRUE"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/running-simulations.html","id":"log-analysis","dir":"Articles","previous_headings":"Running Simulations > Monitoring Progress","what":"Log Analysis","title":"Running Simulations","text":"","code":"# Monitor simulation progress tail -f ./logs/simulation_log.txt  # Check for errors grep \"ERROR\" ./logs/*.txt  # Monitor memory usage grep \"Memory\" ./logs/*.txt"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/running-simulations.html","id":"multi-core-configuration","dir":"Articles","previous_headings":"Running Simulations > Parallel Processing","what":"Multi-core Configuration","title":"Running Simulations","text":"","code":"# Optimal settings for different hardware # 16GB RAM system: clusternumber: 1 clusternumber_export: 1  # 32GB RAM system: clusternumber: 2   clusternumber_export: 1  # 64GB+ RAM system: clusternumber: 4 clusternumber_export: 2"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/running-simulations.html","id":"clusterhpc-environments","dir":"Articles","previous_headings":"Running Simulations > Parallel Processing","what":"Cluster/HPC Environments","title":"Running Simulations","text":"","code":"# For SLURM clusters library(parallelly) library(future)  # Set up parallel backend cl <- parallelly::makeClusterPSOCK(   workers = as.numeric(Sys.getenv(\"SLURM_NTASKS\", \"1\")),   rshcmd = \"srun\" )  # Configure simulation for cluster design$sim_prm$clusternumber <- length(cl)"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/running-simulations.html","id":"directory-structure","dir":"Articles","previous_headings":"Running Simulations > Output Management","what":"Directory Structure","title":"Running Simulations","text":"Simulations create following output structure:","code":"outputs/ ├── summaries/           # Aggregated statistics │   ├── disease_summary.csv │   ├── exposure_summary.csv │   └── mortality_summary.csv ├── tables/             # Formatted tables │   ├── incidence_by_age.csv │   ├── prevalence_trends.csv │   └── policy_impact.csv ├── plots/              # Visualizations │   ├── disease_trends.png │   ├── exposure_patterns.png │   └── scenario_comparison.png ├── lifecourse/         # Individual trajectories │   └── mc=1/ │       ├── individuals_1.fst │       └── ... └── logs/               # Simulation logs     ├── simulation_log.txt     └── error_log.txt"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/running-simulations.html","id":"customizing-outputs","dir":"Articles","previous_headings":"Running Simulations > Output Management","what":"Customizing Outputs","title":"Running Simulations","text":"","code":"# Customize output tables design$tables_prm$age_breaks <- c(20, 40, 60, 80, 100) design$tables_prm$summary_years <- c(2020, 2030, 2040)  # Control plot generation design$plots_prm$generate_disease_plots <- TRUE design$plots_prm$generate_exposure_plots <- TRUE design$plots_prm$plot_format <- \"png\" design$plots_prm$plot_resolution <- 300"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/running-simulations.html","id":"memory-management","dir":"Articles","previous_headings":"Running Simulations > Performance Optimization","what":"Memory Management","title":"Running Simulations","text":"","code":"# Reduce memory usage design$sim_prm$store_full_lifecourse <- FALSE  # Don't save all trajectories design$sim_prm$summary_only <- TRUE            # Generate summaries only  # Garbage collection frequency design$sim_prm$gc_freq <- 5000  # Run garbage collection every 5000 individuals"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/running-simulations.html","id":"io-optimization","dir":"Articles","previous_headings":"Running Simulations > Performance Optimization","what":"I/O Optimization","title":"Running Simulations","text":"","code":"# Use faster file formats design$export_prm$use_fst <- TRUE        # Use FST for large datasets design$export_prm$compression <- 50      # Compress outputs  # Batch output writing design$export_prm$batch_size <- 10000    # Write outputs in batches"},{"path":[]},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/running-simulations.html","id":"out-of-memory","dir":"Articles","previous_headings":"Running Simulations > Troubleshooting > Common Issues","what":"Out of Memory","title":"Running Simulations","text":"","code":"# Reduce population size design$sim_prm$pop_size <- 50000  # Use fewer cores design$sim_prm$clusternumber <- 1  # Disable full lifecourse storage design$sim_prm$store_full_lifecourse <- FALSE"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/running-simulations.html","id":"slow-performance","dir":"Articles","previous_headings":"Running Simulations > Troubleshooting > Common Issues","what":"Slow Performance","title":"Running Simulations","text":"","code":"# Optimize for your hardware design$sim_prm$clusternumber <- parallel::detectCores() - 1  # Reduce I/O frequency design$export_prm$batch_size <- 20000  # Use ramdisk for temporary files (Linux/macOS) design$sim_prm$temp_dir <- \"/tmp/impactncdjapan\""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/running-simulations.html","id":"calibration-issues","dir":"Articles","previous_headings":"Running Simulations > Troubleshooting > Common Issues","what":"Calibration Issues","title":"Running Simulations","text":"","code":"# Increase tolerance design$calibration_prm$tolerance <- 0.10  # Extend iteration limit design$calibration_prm$max_iterations <- 200  # Check input data quality design$validate_inputs()"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/running-simulations.html","id":"debugging","dir":"Articles","previous_headings":"Running Simulations > Troubleshooting","what":"Debugging","title":"Running Simulations","text":"","code":"# Enable detailed logging design$sim_prm$debug_mode <- TRUE  # Save intermediate results design$sim_prm$save_checkpoints <- TRUE design$sim_prm$checkpoint_freq <- 1000  # Profile performance Rprof(\"simulation_profile.out\") sim$run() Rprof(NULL)"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/scenario-analysis.html","id":"scenario-analysis-with-impactncd-japan","dir":"Articles","previous_headings":"","what":"Scenario Analysis with IMPACTncd-Japan","title":"Scenario Analysis","text":"guide covers design, implement, analyze policy scenarios using IMPACTncd-Japan.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/scenario-analysis.html","id":"what-is-scenario-analysis","dir":"Articles","previous_headings":"Scenario Analysis with IMPACTncd-Japan","what":"What is Scenario Analysis?","title":"Scenario Analysis","text":"Scenario analysis allows : - Model policy interventions: Test impact health policies - Compare alternatives: Evaluate different intervention strategies - Quantify benefits: Measure health gains lives saved - Assess cost-effectiveness: Support health economic evaluations","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/scenario-analysis.html","id":"trend-modification-scenarios","dir":"Articles","previous_headings":"Scenario Analysis with IMPACTncd-Japan > Types of Scenarios","what":"1. Trend Modification Scenarios","title":"Scenario Analysis","text":"Change trajectory risk factor trends time:","code":"# Example: Reduce smoking prevalence scenario_name: \"smoking_reduction\" interventions:   smoking:     type: \"trend_change\"     start_year: 2025     end_year: 2040     target_reduction: 0.50    # 50% relative reduction     implementation_curve: \"linear\"  # linear, exponential, or logistic"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/scenario-analysis.html","id":"policy-shock-scenarios","dir":"Articles","previous_headings":"Scenario Analysis with IMPACTncd-Japan > Types of Scenarios","what":"2. Policy Shock Scenarios","title":"Scenario Analysis","text":"Implement immediate changes risk factors:","code":"# Example: Sugar tax reducing BMI scenario_name: \"sugar_tax\" interventions:   bmi:     type: \"policy_shock\"     implementation_year: 2030     effect_size: -1.2         # Reduce mean BMI by 1.2 kg/m²     coverage: 0.80            # 80% population coverage     fadeout_years: 5          # Effect diminishes over 5 years"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/scenario-analysis.html","id":"treatmentcare-improvements","dir":"Articles","previous_headings":"Scenario Analysis with IMPACTncd-Japan > Types of Scenarios","what":"3. Treatment/Care Improvements","title":"Scenario Analysis","text":"Modify disease case fatality rates treatment effectiveness:","code":"# Example: Improved cardiac care scenario_name: \"improved_cardiac_care\" interventions:   chd_treatment:     type: \"case_fatality_reduction\"     start_year: 2025     diseases: [\"CHD\", \"stroke\"]     reduction: 0.15           # 15% reduction in case fatality     coverage_increase: 0.10   # 10% increase in treatment coverage"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/scenario-analysis.html","id":"method-1-yaml-configuration","dir":"Articles","previous_headings":"Scenario Analysis with IMPACTncd-Japan > Implementing Scenarios","what":"Method 1: YAML Configuration","title":"Scenario Analysis","text":"Create scenario-specific YAML files:","code":"# scenarios/smoking_ban.yaml scenario_name: \"comprehensive_smoking_ban\" scenario_description: \"Complete smoking ban in public places with enforcement\"  base_design_file: \"./inputs/sim_design_baseline.yaml\"  interventions:   smoking:     type: \"trend_change\"     start_year: 2025     target_reduction: 0.70     implementation_curve: \"exponential\"        passive_smoking:     type: \"policy_shock\"      implementation_year: 2025     effect_size: -0.80        # 80% reduction in passive smoking"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/scenario-analysis.html","id":"method-2-programmatic-definition","dir":"Articles","previous_headings":"Scenario Analysis with IMPACTncd-Japan > Implementing Scenarios","what":"Method 2: Programmatic Definition","title":"Scenario Analysis","text":"Define scenarios R code:","code":"create_smoking_scenario <- function(reduction_percent, start_year = 2025) {   design <- Design$new()   design$read_yaml(\"./inputs/sim_design_baseline.yaml\")      # Modify smoking trends   design$scenario_prm$smoking_reduction <- reduction_percent   design$scenario_prm$intervention_start <- start_year      # Update scenario metadata   design$sim_prm$scenario_name <- paste0(\"smoking_\", reduction_percent*100, \"pct\")   design$sim_prm$scenario_description <- paste0(     \"Smoking reduction of \", reduction_percent*100, \"% starting \", start_year   )      return(design) }  # Create multiple scenarios scenarios <- list(   smoking_25 = create_smoking_scenario(0.25),   smoking_50 = create_smoking_scenario(0.50),   smoking_75 = create_smoking_scenario(0.75) )"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/scenario-analysis.html","id":"method-3-batch-scenario-runner","dir":"Articles","previous_headings":"Scenario Analysis with IMPACTncd-Japan > Implementing Scenarios","what":"Method 3: Batch Scenario Runner","title":"Scenario Analysis","text":"Process multiple scenarios automatically:","code":"library(yaml)  run_scenario_batch <- function(scenario_dir, output_base_dir) {   scenario_files <- list.files(scenario_dir, pattern = \"\\\\.yaml$\", full.names = TRUE)      results <- list()      for (scenario_file in scenario_files) {     scenario_name <- tools::file_path_sans_ext(basename(scenario_file))     cat(\"Running scenario:\", scenario_name, \"\\n\")          # Load scenario configuration     scenario_config <- yaml::read_yaml(scenario_file)          # Create design     design <- Design$new()     design$read_yaml(scenario_config$base_design_file)          # Apply scenario modifications     design$apply_scenario(scenario_config)          # Set output directory     design$sim_prm$output_dir <- file.path(output_base_dir, scenario_name)          # Run simulation     sim <- Simulation$new(design)     sim$run()          # Store results summary     results[[scenario_name]] <- sim$get_summary()   }      return(results) }"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/scenario-analysis.html","id":"combined-risk-factor-interventions","dir":"Articles","previous_headings":"Scenario Analysis with IMPACTncd-Japan > Complex Multi-Intervention Scenarios","what":"Combined Risk Factor Interventions","title":"Scenario Analysis","text":"","code":"scenario_name: \"comprehensive_prevention\" scenario_description: \"Multi-risk factor intervention program\"  interventions:   # Tobacco control   smoking:     type: \"trend_change\"     start_year: 2025     target_reduction: 0.60        # Nutrition policy     bmi:     type: \"policy_shock\"     implementation_year: 2027     effect_size: -1.5        # Physical activity promotion   physical_activity:     type: \"trend_change\"     start_year: 2026     target_increase: 0.30        # Salt reduction   blood_pressure:     type: \"policy_shock\"     implementation_year: 2028     effect_size: -2.5         # mmHg reduction"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/scenario-analysis.html","id":"staged-implementation","dir":"Articles","previous_headings":"Scenario Analysis with IMPACTncd-Japan > Complex Multi-Intervention Scenarios","what":"Staged Implementation","title":"Scenario Analysis","text":"","code":"scenario_name: \"phased_intervention\"  # Phase 1: Tobacco control (2025-2030) phase_1:   years: [2025, 2030]   interventions:     smoking:       type: \"trend_change\"       target_reduction: 0.40  # Phase 2: Add nutrition (2030-2035)   phase_2:   years: [2030, 2035]   interventions:     smoking:       type: \"maintain\"        # Continue phase 1 effect     bmi:       type: \"policy_shock\"       effect_size: -1.0  # Phase 3: Full implementation (2035+) phase_3:   years: [2035, 2040]   interventions:     smoking:       type: \"trend_change\"       target_reduction: 0.70  # Strengthen tobacco control     bmi:       type: \"maintain\"     physical_activity:       type: \"trend_change\"       target_increase: 0.25"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/scenario-analysis.html","id":"comparative-analysis","dir":"Articles","previous_headings":"Scenario Analysis with IMPACTncd-Japan > Analyzing Scenario Results","what":"Comparative Analysis","title":"Scenario Analysis","text":"","code":"# Load results from multiple scenarios baseline_results <- load_simulation_results(\"./outputs/baseline\") scenario_results <- load_simulation_results(\"./outputs/smoking_50pct\")  # Calculate differences health_impact <- calculate_health_impact(   baseline = baseline_results,   scenario = scenario_results,   metrics = c(\"deaths_averted\", \"life_years_gained\", \"disease_cases_prevented\") )  # Summarize by age groups and time periods summary_table <- health_impact %>%   group_by(age_group, year) %>%   summarise(     deaths_averted = sum(deaths_averted),     ly_gained = sum(life_years_gained),     cases_prevented = sum(cases_prevented),     .groups = \"drop\"   )"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/scenario-analysis.html","id":"time-series-analysis","dir":"Articles","previous_headings":"Scenario Analysis with IMPACTncd-Japan > Analyzing Scenario Results","what":"Time Series Analysis","title":"Scenario Analysis","text":"","code":"# Track intervention effects over time plot_intervention_timeline <- function(results_list) {      combined_data <- map_dfr(results_list, ~{     .x$mortality_trends %>%       select(year, deaths_total, scenario_name)   }, .id = \"scenario\")      ggplot(combined_data, aes(x = year, y = deaths_total, color = scenario)) +     geom_line(size = 1.2) +     geom_vline(xintercept = 2025, linetype = \"dashed\", alpha = 0.7) +     labs(       title = \"Mortality Trends by Scenario\",       subtitle = \"Intervention starts in 2025\",       x = \"Year\",       y = \"Total Deaths\",       color = \"Scenario\"     ) +     theme_minimal() }"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/scenario-analysis.html","id":"cost-effectiveness-preparation","dir":"Articles","previous_headings":"Scenario Analysis with IMPACTncd-Japan > Analyzing Scenario Results","what":"Cost-Effectiveness Preparation","title":"Scenario Analysis","text":"","code":"# Prepare data for health economic evaluation prepare_cea_data <- function(baseline, scenario, intervention_cost) {      # Calculate health outcomes   health_outcomes <- list(     deaths_averted = sum(scenario$deaths_total) - sum(baseline$deaths_total),     qalys_gained = sum(scenario$qalys_total) - sum(baseline$qalys_total),     life_years_gained = sum(scenario$life_years_total) - sum(baseline$life_years_total)   )      # Calculate costs (requires additional cost modeling)   costs <- list(     intervention_cost = intervention_cost,     healthcare_cost_savings = calculate_healthcare_savings(baseline, scenario),     net_cost = intervention_cost - calculate_healthcare_savings(baseline, scenario)   )      # Cost-effectiveness ratios   cea_ratios <- list(     cost_per_qaly = costs$net_cost / health_outcomes$qalys_gained,     cost_per_ly = costs$net_cost / health_outcomes$life_years_gained,     cost_per_death_averted = costs$net_cost / health_outcomes$deaths_averted   )      return(list(     outcomes = health_outcomes,     costs = costs,     ratios = cea_ratios   )) }"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/scenario-analysis.html","id":"scenario-design","dir":"Articles","previous_headings":"Scenario Analysis with IMPACTncd-Japan > Best Practices","what":"Scenario Design","title":"Scenario Analysis","text":"Use realistic assumptions: Base interventions evidence similar policies Consider implementation lag: Allow time policy rollout behavior change Account coverage: interventions reach 100% population Model fadeout effects: Consider whether intervention effects diminish time","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/scenario-analysis.html","id":"validation","dir":"Articles","previous_headings":"Scenario Analysis with IMPACTncd-Japan > Best Practices","what":"Validation","title":"Scenario Analysis","text":"","code":"# Validate scenario assumptions validate_scenario <- function(design) {   checks <- list()      # Check intervention magnitudes are realistic   checks$realistic_effects <- all(abs(design$intervention_effects) < 0.8)      # Check timeline consistency   checks$timeline_valid <- design$intervention_start >= design$sim_prm$years[1]      # Check coverage rates   checks$coverage_valid <- all(design$coverage_rates <= 1.0 & design$coverage_rates >= 0)      return(checks) }"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/scenario-analysis.html","id":"sensitivity-analysis","dir":"Articles","previous_headings":"Scenario Analysis with IMPACTncd-Japan > Best Practices","what":"Sensitivity Analysis","title":"Scenario Analysis","text":"","code":"# Test robustness of results run_sensitivity_analysis <- function(base_scenario, parameters, ranges) {      results <- list()      for (param in parameters) {     param_results <- list()          for (value in ranges[[param]]) {       # Modify parameter       modified_scenario <- base_scenario       modified_scenario[[param]] <- value              # Run simulation       sim <- Simulation$new(modified_scenario)       sim$run()              param_results[[as.character(value)]] <- sim$get_summary()     }          results[[param]] <- param_results   }      return(results) }  # Example sensitivity analysis sensitivity_params <- list(   smoking_reduction = seq(0.3, 0.7, 0.1),   implementation_speed = c(\"slow\", \"medium\", \"fast\"),   coverage_rate = seq(0.6, 1.0, 0.1) )"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/scenario-analysis.html","id":"summary-tables","dir":"Articles","previous_headings":"Scenario Analysis with IMPACTncd-Japan > Reporting Results","what":"Summary Tables","title":"Scenario Analysis","text":"Generate standardized summary tables different audiences:","code":"# Policy maker summary create_policy_summary <- function(scenario_results) {   summary <- scenario_results %>%     group_by(scenario_name) %>%     summarise(       `Deaths Averted (2025-2040)` = sum(deaths_averted),       `Life Years Gained` = sum(life_years_gained),       `Disease Cases Prevented` = sum(cases_prevented),       `Peak Health Benefit Year` = year[which.max(annual_benefit)],       .groups = \"drop\"     )      return(summary) }  # Technical summary create_technical_summary <- function(scenario_results) {   # Include confidence intervals, age-specific results, etc. }"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/scenario-analysis.html","id":"visualization","dir":"Articles","previous_headings":"Scenario Analysis with IMPACTncd-Japan > Reporting Results","what":"Visualization","title":"Scenario Analysis","text":"Create compelling visualizations different stakeholders:","code":"# Create impact visualization plot_scenario_impact <- function(results) {   # Implementation depends on your specific data structure   # Include before/after comparisons, uncertainty bands, etc. }"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"introduction","dir":"Articles","previous_headings":"","what":"Introduction","title":"Technical Documentation","text":"IMPACT NCD open-source microsimulation modelling framework public health policy evaluation, planning, decision-making focused prevention non-communicable diseases (NCD). present paper aimed evaluate effect observed changes cardiovascular disease (CVD) risk factors CVD mortality, prevalence, incidence, medical costs, Quality Adjusted Life Years (QALYs) 2001 2019. IMPACT NCD Japan (IMPACT NCD-JPN) presented first time, IMPACT NCD used extensively model primary prevention policies nationally England, Brazil, Germany, United States (US) locally Liverpool, city northwest England. core IMPACT NCD-JPN model epidemiological engine includes age, sex, smoking, fruit vegetable consumption, physical activity, body mass index (BMI), systolic blood pressure (SBP), haemoglobin A1c (HbA1c), low-density lipoprotein cholesterol (LDL-c), risk factors. Note: model architecture description IMPACT NCD-JPN document based earlier technical appendix IMPACT NCD England published University Liverpool. Thus, text similar earlier document.","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"high-level-description","dir":"Articles","previous_headings":"Epidemiological Engine","what":"High-level Description","title":"Technical Documentation","text":"epidemiological engine IMPACT NCD-JPN discrete-time, dynamic, stochastic microsimulation consisting three modules: Demographic, Exposure, Disease modules. Within IMPACT NCD-JPN epidemiological engine, unit synthetic individual (simulant) represented record containing unique identifier set associated attributes. microsimulation projects life course synthetic individual. synthetic individual’s attributes include: Age sex demographic exposures. Behavioral risk factors: Smoking status (current smoker/ex-smoker/never-smoker), smoking intensity, fruit vegetable consumption, physical activity. Biological risk factors: BMI, SBP, LDL-c, HbA1c. Disease risk: risk two diseases modelled explicitly: CHD stroke. risk conditions modelled relevant exposures demographic, behavioural, biological risk factor attributes. Mortality: Mortality CHD, stroke, cause recorded occurs. attributes updated discrete annual steps according set stochastic rules based well-established epidemiological principles.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"demographic-module","dir":"Articles","previous_headings":"Epidemiological Engine","what":"Demographic Module","title":"Technical Documentation","text":"first year every simulation IMPACT NCD-JPN 2001. simulation, algorithm: Draws 400,000 synthetic individuals, aged 30 99, joint age-sex distribution (default value can modified user). Creates backward projections 1991 (maximum time lag ten years). Creates forward projections 2019, mortality considerations. IMPACT NCD-JPN follows open cohort approach new 30-year-old cohorts enter model annually.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"exposure-module","dir":"Articles","previous_headings":"Epidemiological Engine","what":"Exposure Module","title":"Technical Documentation","text":"module simulates adult life course exposures based National Health Nutrition Survey (NHNS) series 2001 2019. approach follows principles: Statistical modeling: Fit appropriate models exposure dependent variable functions year, age, sex, exposures independent variables. Trend extraction: Include year independent variable extract trends project future. Rank stability: Synthetic individuals retain quantiles throughout life course, minor random walk adjustments.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"clustering-of-risk-factors","dir":"Articles","previous_headings":"Epidemiological Engine > Exposure Module","what":"Clustering of Risk Factors","title":"Technical Documentation","text":"model captures correlations exposures using: Imputation missing variables NHNS Conversion exposures quantiles Estimation linear correlation matrix Generation correlated random number streams Application correlated streams exposure quantiles","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"disease-module","dir":"Articles","previous_headings":"Epidemiological Engine","what":"Disease Module","title":"Technical Documentation","text":"disease module translates exposures disease incidence using population-attributable risk fraction approach (PARF).","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"disease-incidence","dir":"Articles","previous_headings":"Epidemiological Engine > Disease Module","what":"Disease Incidence","title":"Technical Documentation","text":"model follows 3-step approach: Step 1: Estimate incidence proportion attributable modelled risk factor age sex, assuming specific time lags exposure disease. Step 2: Estimate portion disease incidence attributable modelled risk factors, assuming multiplicative risks. Step 3: Estimate individualized probability developing disease synthetic individual. implementation uses PARF formula: : - n = number synthetic individuals population - RRi1…ik = relative risks risk factors individual ","code":"PARF = 1 - n/Σ(RRi1 * RRi2 * ... * RRik)"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"time-lags","dir":"Articles","previous_headings":"Epidemiological Engine > Disease Module","what":"Time Lags","title":"Technical Documentation","text":"Time lags vary stochastically 1 10 years following shifted binomial distribution, mean lag times set according empirical data:","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"initial-prevalence-and-mortality","dir":"Articles","previous_headings":"Epidemiological Engine > Disease Module","what":"Initial Prevalence and Mortality","title":"Technical Documentation","text":"initial simulation year, synthetic individuals allocated prevalent cases using similar procedures incidence. model treats mortality cause using disease-specific mortality rates applies PARF approach case fatality.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"model-outputs","dir":"Articles","previous_headings":"","what":"Model Outputs","title":"Technical Documentation","text":"model produces adult life-course trajectories simulant 19-year time horizon (2001-2019). Annual summary measures including incidence, prevalence, mortality rates calculated can compared across scenarios.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"uncertainty-analysis","dir":"Articles","previous_headings":"Model Outputs","what":"Uncertainty Analysis","title":"Technical Documentation","text":"IMPACT NCD-JPN implements 2nd order Monte Carlo approach estimate uncertainty intervals, considering: Stochastic uncertainty: Minimized using random numbers across scenarios Parameter uncertainty: sampling errors relative risks Individual heterogeneity: Conditional individual characteristics Structural uncertainty: Limited consideration due strong epidemiological foundations","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"validation-and-calibration","dir":"Articles","previous_headings":"","what":"Validation and Calibration","title":"Technical Documentation","text":"model validated using: Internal validation: Plotting modelled exposures observed NHNS data Disease validation: Comparing modelled disease incidence observed data Calibration: Adjusting modelled incidence observed data 2001-2019 Trends disease incidence decomposed based causally linked risk factors, residual incidence assumed follow log-linear trends.","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"exposure-data","dir":"Articles","previous_headings":"Data Sources","what":"Exposure Data","title":"Technical Documentation","text":"National Health Nutrition Survey (NHNS): Risk factor levels, 2001-2019 Population: Statistics Bureau, Ministry Internal Affairs Communications","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"disease-data","dir":"Articles","previous_headings":"Data Sources","what":"Disease Data","title":"Technical Documentation","text":"Incidence/Prevalence: Global Burden Diseases (GBD) 2021 results Mortality: Vital Statistics Japan, Ministry Health, Labour Welfare Projections: Bayesian age-period-cohort models","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"cost-data","dir":"Articles","previous_headings":"Data Sources","what":"Cost Data","title":"Technical Documentation","text":"Direct costs: National Medical Care Expenditure estimates (2019) Indirect costs: Cost illness study CHD stroke (2017)","code":""},{"path":[]},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"limitations","dir":"Articles","previous_headings":"Key Assumptions and Limitations","what":"Limitations","title":"Technical Documentation","text":"Data limitations: Pre-COVID-19 data ; limited 2019 Risk factors: Limited modelled factors; incomplete smoking cumulative risk Selection bias: Unavoidable data sources Discrete-time bias: Annual time steps may miss within-year dynamics","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"strengths","dir":"Articles","previous_headings":"","what":"Strengths","title":"Technical Documentation","text":"IMPACT NCD-JPN model provides: Dynamic modeling: Accounts competing risks population dynamics Individual-level analysis: Enables exploration multimorbidity patterns Flexibility: Modular design allows independent development policy layers Transparency: Open-source license ensures accountability Validation: Extensive internal external validation procedures","code":""},{"path":[]},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"reference-levels-for-risk-calculation","dir":"Articles","previous_headings":"Mathematical Framework Details","what":"Reference Levels for Risk Calculation","title":"Technical Documentation","text":"SBP: 112.5 mmHg (110-115 range) LDL-c: 85 mg/dL (70-100 range) BMI: 22 kg/m² (21-23 range) HbA1c: 6.5% (6-7 range) Fruit/vegetables: 4+ portions per day (3-5 range) Physical activity: 5+ active days per week CHD","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"direct-costs","dir":"Articles","previous_headings":"Cost Analysis","what":"Direct Costs","title":"Technical Documentation","text":"Sourced National Medical Care Expenditure estimates 2019, covering medical treatment costs CHD stroke.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"indirect-costs","dir":"Articles","previous_headings":"Cost Analysis","what":"Indirect Costs","title":"Technical Documentation","text":"Productivity losses: Morbidity mortality-related losses ages 30-75 Informal care: Family burden long-term care across age groups Apportionment: Based working population proportions disease prevalence","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"coronary-heart-disease-chd","dir":"Articles","previous_headings":"Disease-Specific Details","what":"Coronary Heart Disease (CHD)","title":"Technical Documentation","text":"Model Structure: Chronic condition recovery Risk Factors: Smoking, fruit/vegetable intake, physical activity, BMI, SBP, LDL-c, HbA1c Validation: Extensive validation plots comparing modeled vs. observed incidence mortality age sex","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"stroke","dir":"Articles","previous_headings":"Disease-Specific Details","what":"Stroke","title":"Technical Documentation","text":"Model Structure: Includes ischemic hemorrhagic stroke (including subarachnoid hemorrhage) Risk Factors: CHD Validation: Comparison local registries (Kochi Prefecture stroke registry, Kumamoto AMI registry)","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"references","dir":"Articles","previous_headings":"","what":"References","title":"Technical Documentation","text":"model incorporates evidence multiple systematic reviews meta-analyses relative risk estimates, specific sources detailed supplementary materials. Key data sources include GBD 2021, Japanese national surveys, international epidemiological studies.","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"model-structure","dir":"Articles","previous_headings":"1. Model Overview","what":"1.1 Model Structure","title":"Technical Documentation","text":"IMPACTncd-Japan model closed-cohort microsimulation model simulates lifecourse synthetic population Japanese adults. model tracks individuals age 20 death, modeling: Risk factor trajectories: Smoking, BMI, blood pressure, cholesterol, physical activity Disease incidence: CHD, stroke, diabetes, COPD, lung cancer Disease progression: Including complications case fatality Mortality: Disease-specific -cause mortality","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"conceptual-framework","dir":"Articles","previous_headings":"1. Model Overview","what":"1.2 Conceptual Framework","title":"Technical Documentation","text":"[section include details PDF conceptual framework, model flow diagrams, etc.]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"model-population","dir":"Articles","previous_headings":"1. Model Overview","what":"1.3 Model Population","title":"Technical Documentation","text":"[Details synthetic population generation, demographics, etc.]","code":""},{"path":[]},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"smoking-initiation","dir":"Articles","previous_headings":"2. Risk Factor Modeling > 2.1 Smoking","what":"2.1.1 Smoking Initiation","title":"Technical Documentation","text":"[Mathematical formulations smoking initiation rates]","code":"# Example structure for smoking initiation model # logit(P_initiation) = β₀ + β₁×age + β₂×sex + β₃×education + ..."},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"smoking-cessation","dir":"Articles","previous_headings":"2. Risk Factor Modeling > 2.1 Smoking","what":"2.1.2 Smoking Cessation","title":"Technical Documentation","text":"[Mathematical formulations smoking cessation rates]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"smoking-intensity","dir":"Articles","previous_headings":"2. Risk Factor Modeling > 2.1 Smoking","what":"2.1.3 Smoking Intensity","title":"Technical Documentation","text":"[Modeling cigarettes per day among smokers]","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"bmi-trajectories","dir":"Articles","previous_headings":"2. Risk Factor Modeling > 2.2 Body Mass Index (BMI)","what":"2.2.1 BMI Trajectories","title":"Technical Documentation","text":"[Mathematical formulations BMI change time]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"obesity-transitions","dir":"Articles","previous_headings":"2. Risk Factor Modeling > 2.2 Body Mass Index (BMI)","what":"2.2.2 Obesity Transitions","title":"Technical Documentation","text":"[Modeling transitions BMI categories]","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"systolic-blood-pressure-model","dir":"Articles","previous_headings":"2. Risk Factor Modeling > 2.3 Blood Pressure","what":"2.3.1 Systolic Blood Pressure Model","title":"Technical Documentation","text":"[Continuous modeling systolic blood pressure]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"hypertension-incidence","dir":"Articles","previous_headings":"2. Risk Factor Modeling > 2.3 Blood Pressure","what":"2.3.2 Hypertension Incidence","title":"Technical Documentation","text":"[Binary modeling hypertension diagnosis]","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"total-cholesterol-model","dir":"Articles","previous_headings":"2. Risk Factor Modeling > 2.4 Cholesterol","what":"2.4.1 Total Cholesterol Model","title":"Technical Documentation","text":"[Continuous modeling total cholesterol]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"treatment-effects","dir":"Articles","previous_headings":"2. Risk Factor Modeling > 2.4 Cholesterol","what":"2.4.2 Treatment Effects","title":"Technical Documentation","text":"[Modeling statin lipid-lowering treatments]","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"physical-activity-levels","dir":"Articles","previous_headings":"2. Risk Factor Modeling > 2.5 Physical Activity","what":"2.5.1 Physical Activity Levels","title":"Technical Documentation","text":"[Modeling physical activity patterns]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"sedentary-behavior","dir":"Articles","previous_headings":"2. Risk Factor Modeling > 2.5 Physical Activity","what":"2.5.2 Sedentary Behavior","title":"Technical Documentation","text":"[Modeling sedentary time]","code":""},{"path":[]},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"incidence-model","dir":"Articles","previous_headings":"3. Disease Models > 3.1 Coronary Heart Disease (CHD)","what":"3.1.1 Incidence Model","title":"Technical Documentation","text":"[Mathematical formulation CHD incidence]","code":"# Example CHD incidence model structure # log(hazard_CHD) = β₀ + β₁×age + β₂×sex + β₃×smoking + β₄×SBP + β₅×cholesterol + ..."},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"case-fatality","dir":"Articles","previous_headings":"3. Disease Models > 3.1 Coronary Heart Disease (CHD)","what":"3.1.2 Case Fatality","title":"Technical Documentation","text":"[CHD case fatality rates time trends]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"recurrent-events","dir":"Articles","previous_headings":"3. Disease Models > 3.1 Coronary Heart Disease (CHD)","what":"3.1.3 Recurrent Events","title":"Technical Documentation","text":"[Modeling recurrent CHD events]","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"stroke-incidence","dir":"Articles","previous_headings":"3. Disease Models > 3.2 Stroke","what":"3.2.1 Stroke Incidence","title":"Technical Documentation","text":"[Mathematical formulation stroke incidence]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"stroke-subtypes","dir":"Articles","previous_headings":"3. Disease Models > 3.2 Stroke","what":"3.2.2 Stroke Subtypes","title":"Technical Documentation","text":"[Ischemic vs hemorrhagic stroke modeling]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"stroke-survival","dir":"Articles","previous_headings":"3. Disease Models > 3.2 Stroke","what":"3.2.3 Stroke Survival","title":"Technical Documentation","text":"[Post-stroke survival modeling]","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"type-2-diabetes-incidence","dir":"Articles","previous_headings":"3. Disease Models > 3.3 Diabetes","what":"3.3.1 Type 2 Diabetes Incidence","title":"Technical Documentation","text":"[Mathematical formulation diabetes incidence]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"diabetes-complications","dir":"Articles","previous_headings":"3. Disease Models > 3.3 Diabetes","what":"3.3.2 Diabetes Complications","title":"Technical Documentation","text":"[Modeling diabetic complications]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"diabetes-management","dir":"Articles","previous_headings":"3. Disease Models > 3.3 Diabetes","what":"3.3.3 Diabetes Management","title":"Technical Documentation","text":"[Treatment effects control modeling]","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"copd-incidence","dir":"Articles","previous_headings":"3. Disease Models > 3.4 Chronic Obstructive Pulmonary Disease (COPD)","what":"3.4.1 COPD Incidence","title":"Technical Documentation","text":"[Mathematical formulation COPD incidence]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"copd-progression","dir":"Articles","previous_headings":"3. Disease Models > 3.4 Chronic Obstructive Pulmonary Disease (COPD)","what":"3.4.2 COPD Progression","title":"Technical Documentation","text":"[Disease severity progression modeling]","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"lung-cancer-incidence","dir":"Articles","previous_headings":"3. Disease Models > 3.5 Lung Cancer","what":"3.5.1 Lung Cancer Incidence","title":"Technical Documentation","text":"[Mathematical formulation lung cancer incidence]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"lung-cancer-survival","dir":"Articles","previous_headings":"3. Disease Models > 3.5 Lung Cancer","what":"3.5.2 Lung Cancer Survival","title":"Technical Documentation","text":"[Survival modeling stage treatment]","code":""},{"path":[]},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"all-cause-mortality","dir":"Articles","previous_headings":"4. Mortality Modeling > 4.1 Background Mortality","what":"4.1.1 All-Cause Mortality","title":"Technical Documentation","text":"[Background mortality rates age sex]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"competing-risks","dir":"Articles","previous_headings":"4. Mortality Modeling > 4.1 Background Mortality","what":"4.1.2 Competing Risks","title":"Technical Documentation","text":"[Handling competing risks simulation]","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"relative-risk-models","dir":"Articles","previous_headings":"4. Mortality Modeling > 4.2 Disease-Specific Mortality","what":"4.2.1 Relative Risk Models","title":"Technical Documentation","text":"[Disease-specific mortality relative risks]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"temporal-trends","dir":"Articles","previous_headings":"4. Mortality Modeling > 4.2 Disease-Specific Mortality","what":"4.2.2 Temporal Trends","title":"Technical Documentation","text":"[Time trends case fatality rates]","code":""},{"path":[]},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"population-demographics","dir":"Articles","previous_headings":"5. Data Sources and Calibration > 5.1 Input Data Sources","what":"5.1.1 Population Demographics","title":"Technical Documentation","text":"[Details population data sources]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"risk-factor-distributions","dir":"Articles","previous_headings":"5. Data Sources and Calibration > 5.1 Input Data Sources","what":"5.1.2 Risk Factor Distributions","title":"Technical Documentation","text":"[Sources risk factor prevalence trends]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"disease-incidence-data","dir":"Articles","previous_headings":"5. Data Sources and Calibration > 5.1 Input Data Sources","what":"5.1.3 Disease Incidence Data","title":"Technical Documentation","text":"[Sources disease incidence rates]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"mortality-data","dir":"Articles","previous_headings":"5. Data Sources and Calibration > 5.1 Input Data Sources","what":"5.1.4 Mortality Data","title":"Technical Documentation","text":"[Sources mortality statistics]","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"calibration-targets","dir":"Articles","previous_headings":"5. Data Sources and Calibration > 5.2 Calibration Methods","what":"5.2.1 Calibration Targets","title":"Technical Documentation","text":"[Description calibration targets methods]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"calibration-algorithms","dir":"Articles","previous_headings":"5. Data Sources and Calibration > 5.2 Calibration Methods","what":"5.2.2 Calibration Algorithms","title":"Technical Documentation","text":"[Mathematical description calibration procedures]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"validation-metrics","dir":"Articles","previous_headings":"5. Data Sources and Calibration > 5.2 Calibration Methods","what":"5.2.3 Validation Metrics","title":"Technical Documentation","text":"[Metrics used assess model performance]","code":""},{"path":[]},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"r-package-structure","dir":"Articles","previous_headings":"6. Model Implementation > 6.1 Software Architecture","what":"6.1.1 R Package Structure","title":"Technical Documentation","text":"[Description R package organization]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"c-implementation","dir":"Articles","previous_headings":"6. Model Implementation > 6.1 Software Architecture","what":"6.1.2 C++ Implementation","title":"Technical Documentation","text":"[Details C++ components performance]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"parallel-processing","dir":"Articles","previous_headings":"6. Model Implementation > 6.1 Software Architecture","what":"6.1.3 Parallel Processing","title":"Technical Documentation","text":"[Implementation parallel simulation]","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"main-simulation-loop","dir":"Articles","previous_headings":"6. Model Implementation > 6.2 Simulation Algorithm","what":"6.2.1 Main Simulation Loop","title":"Technical Documentation","text":"[Pseudocode main simulation algorithm]","code":"# Pseudocode for main simulation loop for (year in simulation_years) {   for (individual in population) {     # Update age     individual$age <- individual$age + 1          # Update risk factors     individual <- update_risk_factors(individual)          # Check for disease incidence     individual <- check_disease_incidence(individual)          # Update disease progression     individual <- update_disease_states(individual)          # Check for mortality     individual <- check_mortality(individual)   }      # Export annual results   export_annual_results(year) }"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"random-number-generation","dir":"Articles","previous_headings":"6. Model Implementation > 6.2 Simulation Algorithm","what":"6.2.2 Random Number Generation","title":"Technical Documentation","text":"[Details random number generation reproducibility]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"memory-management","dir":"Articles","previous_headings":"6. Model Implementation > 6.2 Simulation Algorithm","what":"6.2.3 Memory Management","title":"Technical Documentation","text":"[Strategies efficient memory usage]","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"summary-statistics","dir":"Articles","previous_headings":"6. Model Implementation > 6.3 Output Generation","what":"6.3.1 Summary Statistics","title":"Technical Documentation","text":"[Methods generating summary outputs]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"confidence-intervals","dir":"Articles","previous_headings":"6. Model Implementation > 6.3 Output Generation","what":"6.3.2 Confidence Intervals","title":"Technical Documentation","text":"[Calculation uncertainty bounds]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"export-formats","dir":"Articles","previous_headings":"6. Model Implementation > 6.3 Output Generation","what":"6.3.3 Export Formats","title":"Technical Documentation","text":"[Description output file formats]","code":""},{"path":[]},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"smoking-parameters","dir":"Articles","previous_headings":"7. Model Parameters > 7.1 Risk Factor Parameters","what":"7.1.1 Smoking Parameters","title":"Technical Documentation","text":"[Complete list smoking-related parameters]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"bmi-parameters","dir":"Articles","previous_headings":"7. Model Parameters > 7.1 Risk Factor Parameters","what":"7.1.2 BMI Parameters","title":"Technical Documentation","text":"[Complete list BMI-related parameters]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"blood-pressure-parameters","dir":"Articles","previous_headings":"7. Model Parameters > 7.1 Risk Factor Parameters","what":"7.1.3 Blood Pressure Parameters","title":"Technical Documentation","text":"[Complete list blood pressure parameters]","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"chd-parameters","dir":"Articles","previous_headings":"7. Model Parameters > 7.2 Disease Parameters","what":"7.2.1 CHD Parameters","title":"Technical Documentation","text":"[Complete list CHD model parameters]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"stroke-parameters","dir":"Articles","previous_headings":"7. Model Parameters > 7.2 Disease Parameters","what":"7.2.2 Stroke Parameters","title":"Technical Documentation","text":"[Complete list stroke model parameters]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"diabetes-parameters","dir":"Articles","previous_headings":"7. Model Parameters > 7.2 Disease Parameters","what":"7.2.3 Diabetes Parameters","title":"Technical Documentation","text":"[Complete list diabetes model parameters]","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"background-mortality-tables","dir":"Articles","previous_headings":"7. Model Parameters > 7.3 Mortality Parameters","what":"7.3.1 Background Mortality Tables","title":"Technical Documentation","text":"[Life tables mortality parameters]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"relative-risk-parameters","dir":"Articles","previous_headings":"7. Model Parameters > 7.3 Mortality Parameters","what":"7.3.2 Relative Risk Parameters","title":"Technical Documentation","text":"[Disease-specific relative risk parameters]","code":""},{"path":[]},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"face-validity","dir":"Articles","previous_headings":"8. Validation and Sensitivity Analysis > 8.1 Internal Validation","what":"8.1.1 Face Validity","title":"Technical Documentation","text":"[Assessment model behavior outputs]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"verification-tests","dir":"Articles","previous_headings":"8. Validation and Sensitivity Analysis > 8.1 Internal Validation","what":"8.1.2 Verification Tests","title":"Technical Documentation","text":"[Technical verification implementation]","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"historical-validation","dir":"Articles","previous_headings":"8. Validation and Sensitivity Analysis > 8.2 External Validation","what":"8.2.1 Historical Validation","title":"Technical Documentation","text":"[Comparison historical trends]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"cross-validation","dir":"Articles","previous_headings":"8. Validation and Sensitivity Analysis > 8.2 External Validation","what":"8.2.2 Cross-Validation","title":"Technical Documentation","text":"[Validation external data sources]","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"parameter-sensitivity","dir":"Articles","previous_headings":"8. Validation and Sensitivity Analysis > 8.3 Sensitivity Analysis","what":"8.3.1 Parameter Sensitivity","title":"Technical Documentation","text":"[Sensitivity key parameter values]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"structural-sensitivity","dir":"Articles","previous_headings":"8. Validation and Sensitivity Analysis > 8.3 Sensitivity Analysis","what":"8.3.2 Structural Sensitivity","title":"Technical Documentation","text":"[Sensitivity model structure assumptions]","code":""},{"path":[]},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"scope-limitations","dir":"Articles","previous_headings":"9. Limitations and Assumptions > 9.1 Model Limitations","what":"9.1.1 Scope Limitations","title":"Technical Documentation","text":"[Diseases risk factors included]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"data-limitations","dir":"Articles","previous_headings":"9. Limitations and Assumptions > 9.1 Model Limitations","what":"9.1.2 Data Limitations","title":"Technical Documentation","text":"[Limitations input data sources]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"methodological-limitations","dir":"Articles","previous_headings":"9. Limitations and Assumptions > 9.1 Model Limitations","what":"9.1.3 Methodological Limitations","title":"Technical Documentation","text":"[Limitations modeling approach]","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"risk-factor-assumptions","dir":"Articles","previous_headings":"9. Limitations and Assumptions > 9.2 Key Assumptions","what":"9.2.1 Risk Factor Assumptions","title":"Technical Documentation","text":"[Key assumptions risk factor modeling]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"disease-model-assumptions","dir":"Articles","previous_headings":"9. Limitations and Assumptions > 9.2 Key Assumptions","what":"9.2.2 Disease Model Assumptions","title":"Technical Documentation","text":"[Key assumptions disease modeling]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"intervention-assumptions","dir":"Articles","previous_headings":"9. Limitations and Assumptions > 9.2 Key Assumptions","what":"9.2.3 Intervention Assumptions","title":"Technical Documentation","text":"[Assumptions policy interventions]","code":""},{"path":[]},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"additional-diseases","dir":"Articles","previous_headings":"10. Future Developments > 10.1 Model Extensions","what":"10.1.1 Additional Diseases","title":"Technical Documentation","text":"[Plans including additional diseases]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"additional-risk-factors","dir":"Articles","previous_headings":"10. Future Developments > 10.1 Model Extensions","what":"10.1.2 Additional Risk Factors","title":"Technical Documentation","text":"[Plans additional risk factor modeling]","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"statistical-methods","dir":"Articles","previous_headings":"10. Future Developments > 10.2 Methodological Improvements","what":"10.2.1 Statistical Methods","title":"Technical Documentation","text":"[Potential improvements statistical methods]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"computational-efficiency","dir":"Articles","previous_headings":"10. Future Developments > 10.2 Methodological Improvements","what":"10.2.2 Computational Efficiency","title":"Technical Documentation","text":"[Plans improving computational performance]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"references-1","dir":"Articles","previous_headings":"","what":"References","title":"Technical Documentation","text":"[Complete reference list technical documentation]","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"appendix-a-mathematical-notation","dir":"Articles","previous_headings":"Appendices","what":"Appendix A: Mathematical Notation","title":"Technical Documentation","text":"[Definition mathematical symbols notation]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"appendix-b-parameter-tables","dir":"Articles","previous_headings":"Appendices","what":"Appendix B: Parameter Tables","title":"Technical Documentation","text":"[Complete parameter tables]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"appendix-c-validation-results","dir":"Articles","previous_headings":"Appendices","what":"Appendix C: Validation Results","title":"Technical Documentation","text":"[Detailed validation results figures]","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/technical-appendix.html","id":"appendix-d-software-dependencies","dir":"Articles","previous_headings":"Appendices","what":"Appendix D: Software Dependencies","title":"Technical Documentation","text":"[Complete list software dependencies versions] technical appendix based supplementary material published Kypridemos et al. (2025). current version, please refer original publication.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/troubleshooting.html","id":"troubleshooting-guide","dir":"Articles","previous_headings":"","what":"Troubleshooting Guide","title":"Troubleshooting","text":"guide helps diagnose resolve common issues using IMPACTncd-Japan.","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/troubleshooting.html","id":"package-dependencies","dir":"Articles","previous_headings":"Troubleshooting Guide > Installation Issues","what":"Package Dependencies","title":"Troubleshooting","text":"Problem: Package installation fails due missing dependencies. Solution:","code":"# Error message Error: package 'CKutils' is not available (for R version 4.x.x) # Install dependencies in correct order install.packages(\"devtools\") devtools::install_github(\"ChristK/CKutils\") devtools::install_github(\"ChristK/IMPACTncd_Japan\",                           subdir = \"Rpackage/IMPACTncd_Japan_model_pkg\")"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/troubleshooting.html","id":"compilation-errors","dir":"Articles","previous_headings":"Troubleshooting Guide > Installation Issues","what":"Compilation Errors","title":"Troubleshooting","text":"Problem: C++ compilation fails. Solutions:","code":"# Error message Error: C++17 standard requested but CXX17 is not defined # Option 1: Update R and packages update.packages()  # Option 2: Set compiler flags Sys.setenv(CXX17 = \"g++\") Sys.setenv(CXX17FLAGS = \"-std=c++17\")  # Option 3: Use Docker instead # See Docker setup guide"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/troubleshooting.html","id":"system-dependencies-linux","dir":"Articles","previous_headings":"Troubleshooting Guide > Installation Issues","what":"System Dependencies (Linux)","title":"Troubleshooting","text":"Problem: Missing system libraries.","code":"# Common missing libraries sudo apt-get install build-essential sudo apt-get install r-base-dev sudo apt-get install libxml2-dev sudo apt-get install libssl-dev sudo apt-get install libcurl4-openssl-dev"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/troubleshooting.html","id":"container-wont-start","dir":"Articles","previous_headings":"Troubleshooting Guide > Docker Issues","what":"Container Won’t Start","title":"Troubleshooting","text":"Problem: Docker container fails start. Diagnostics: Solutions:","code":"# Check Docker status docker info  # Check available space df -h  # Check memory limits docker system info | grep Memory # Restart Docker service (Linux) sudo systemctl restart docker  # Increase Docker memory (Windows/macOS) # Docker Desktop > Settings > Resources > Memory  # Clean up Docker resources docker system prune -a"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/troubleshooting.html","id":"permission-errors","dir":"Articles","previous_headings":"Troubleshooting Guide > Docker Issues","what":"Permission Errors","title":"Troubleshooting","text":"Problem: access mounted directories. Solutions:","code":"# Error message Permission denied: '/outputs' # Linux: Fix directory permissions sudo chown -R $USER:$USER ./outputs ./synthpop  # Add user to docker group sudo usermod -aG docker $USER newgrp docker  # Windows: Use PowerShell as Administrator # macOS: Ensure directory is accessible to Docker"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/troubleshooting.html","id":"slow-performance","dir":"Articles","previous_headings":"Troubleshooting Guide > Docker Issues","what":"Slow Performance","title":"Troubleshooting","text":"Problem: Docker simulation runs slowly. Solutions:","code":"# Use volume mode for better I/O ./setup_user_docker_env.sh --UseVolumes  # Increase Docker resources # Docker Desktop > Settings > Resources # - CPUs: Set to number of cores - 1 # - Memory: Set to maximum available # - Swap: Set to 2GB  # Use faster storage # Move output directories to SSD"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/troubleshooting.html","id":"out-of-memory-errors","dir":"Articles","previous_headings":"Troubleshooting Guide > Memory Issues","what":"Out of Memory Errors","title":"Troubleshooting","text":"Problem: Simulation crashes memory errors. Diagnostics: Solutions:","code":"# Error message Error: cannot allocate vector of size 2.3 Gb # Check memory usage memory.size()  # Windows object.size(ls()) # All platforms  # Monitor during simulation design$sim_prm$memory_monitoring <- TRUE # Reduce population size design$sim_prm$pop_size <- 50000  # Instead of 100000  # Use fewer cores design$sim_prm$clusternumber <- 1  # Disable full lifecourse storage design$sim_prm$store_full_lifecourse <- FALSE  # Enable garbage collection design$sim_prm$gc_freq <- 1000  # Use summary-only mode design$sim_prm$summary_only <- TRUE"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/troubleshooting.html","id":"memory-leaks","dir":"Articles","previous_headings":"Troubleshooting Guide > Memory Issues","what":"Memory Leaks","title":"Troubleshooting","text":"Problem: Memory usage grows simulation. Diagnostics: Solutions:","code":"# Profile memory usage Rprof(memory.profiling = TRUE) # ... run simulation ... Rprof(NULL) summaryRprof(\"Rprof.out\", memory = \"both\") # Force garbage collection gc()  # Clear large objects periodically rm(large_object) gc()  # Use memory-efficient data structures options(datatable.auto.index = FALSE)"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/troubleshooting.html","id":"slow-simulation-speed","dir":"Articles","previous_headings":"Troubleshooting Guide > Performance Issues","what":"Slow Simulation Speed","title":"Troubleshooting","text":"Problem: Simulation takes much longer expected. Diagnostics: Solutions:","code":"# Enable timing design$sim_prm$timing <- TRUE  # Profile performance Rprof(\"simulation_profile.out\") # ... run simulation ... Rprof(NULL) summaryRprof(\"simulation_profile.out\") # Optimize core usage design$sim_prm$clusternumber <- parallel::detectCores() - 1  # Reduce I/O frequency design$export_prm$batch_size <- 10000  # Use faster storage design$sim_prm$temp_dir <- \"/tmp\"  # Linux/macOS design$sim_prm$temp_dir <- \"C:/temp\"  # Windows  # Simplify model design$diseases <- c(\"CHD\", \"Stroke\")  # Fewer diseases design$exposures <- c(\"Smoking\", \"BMI\")  # Fewer risk factors"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/troubleshooting.html","id":"disk-io-bottlenecks","dir":"Articles","previous_headings":"Troubleshooting Guide > Performance Issues","what":"Disk I/O Bottlenecks","title":"Troubleshooting","text":"Problem: Simulation slow due disk writes. Solutions:","code":"# Use faster file formats design$export_prm$use_fst <- TRUE design$export_prm$compression <- 85  # Batch outputs design$export_prm$batch_size <- 20000  # Use RAM disk (Linux/macOS) design$sim_prm$temp_dir <- \"/dev/shm/impactncdjapan\"  # Parallel I/O design$export_prm$parallel_export <- TRUE"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/troubleshooting.html","id":"model-wont-calibrate","dir":"Articles","previous_headings":"Troubleshooting Guide > Calibration Issues","what":"Model Won’t Calibrate","title":"Troubleshooting","text":"Problem: Calibration fails converge. Diagnostics: Solutions:","code":"# Error message Warning: Calibration did not converge after 100 iterations # Check calibration targets design$validate_calibration_targets()  # Review fit statistics design$calibration_prm$tolerance <- 0.10  # More lenient design$calibration_prm$max_iterations <- 200 # Improve starting values design$set_better_initial_parameters()  # Use different optimization method design$calibration_prm$method <- \"BFGS\"  # Check input data quality design$validate_input_data()  # Simplify calibration targets design$calibration_prm$targets <- subset_targets"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/troubleshooting.html","id":"poor-model-fit","dir":"Articles","previous_headings":"Troubleshooting Guide > Calibration Issues","what":"Poor Model Fit","title":"Troubleshooting","text":"Problem: Model doesn’t match observed data well. Diagnostics: Solutions:","code":"# Generate validation plots design$plot_calibration_fit()  # Compare model vs. observed validation_report <- design$validate_fit() print(validation_report) # Adjust model structure # - Add age interactions # - Include cohort effects # - Modify trend assumptions  # Update input data # - Use more recent data sources # - Improve data quality # - Add missing covariates  # Refine calibration approach # - Weight targets differently # - Use subset of population for calibration # - Calibrate in stages"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/troubleshooting.html","id":"missing-output-files","dir":"Articles","previous_headings":"Troubleshooting Guide > Results Issues","what":"Missing Output Files","title":"Troubleshooting","text":"Problem: Expected output files created. Diagnostics: Solutions:","code":"# Check output directory structure ls -la ./outputs/  # Check simulation logs tail -f ./outputs/logs/simulation.log  # Check for errors grep \"ERROR\" ./outputs/logs/*.txt # Verify output directory settings design$sim_prm$output_dir <- normalizePath(\"./outputs\")  # Check permissions # Ensure write access to output directory  # Enable verbose logging design$sim_prm$verbose <- TRUE design$sim_prm$debug_mode <- TRUE"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/troubleshooting.html","id":"corrupted-output-files","dir":"Articles","previous_headings":"Troubleshooting Guide > Results Issues","what":"Corrupted Output Files","title":"Troubleshooting","text":"Problem: Output files unreadable corrupted. Diagnostics: Solutions:","code":"# Test file integrity tryCatch({   data <- fst::read_fst(\"./outputs/mc=1/population.fst\")   print(nrow(data)) }, error = function(e) print(e)) # Use more robust file formats design$export_prm$use_csv_backup <- TRUE  # Reduce compression design$export_prm$compression <- 50  # Check disk space # Ensure adequate free space before running  # Use checksums for validation design$export_prm$verify_checksums <- TRUE"},{"path":[]},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/troubleshooting.html","id":"cannot-allocate-vector-of-size-x-x-gb","dir":"Articles","previous_headings":"Troubleshooting Guide > Error Messages > Common Error Messages and Solutions","what":"“cannot allocate vector of size X.X Gb”","title":"Troubleshooting","text":"","code":"# Reduce memory usage design$sim_prm$pop_size <- 25000 design$sim_prm$clusternumber <- 1"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/troubleshooting.html","id":"subscript-out-of-bounds","dir":"Articles","previous_headings":"Troubleshooting Guide > Error Messages > Common Error Messages and Solutions","what":"“subscript out of bounds”","title":"Troubleshooting","text":"","code":"# Check data dimensions design$validate_input_dimensions()  # Enable bounds checking design$sim_prm$safe_mode <- TRUE"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/troubleshooting.html","id":"object-x-not-found","dir":"Articles","previous_headings":"Troubleshooting Guide > Error Messages > Common Error Messages and Solutions","what":"“object ‘X’ not found”","title":"Troubleshooting","text":"","code":"# Check package loading library(IMPACTncdJapan)  # Verify object creation exists(\"design\") class(design)"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/troubleshooting.html","id":"invalid-yaml-file","dir":"Articles","previous_headings":"Troubleshooting Guide > Error Messages > Common Error Messages and Solutions","what":"“Invalid YAML file”","title":"Troubleshooting","text":"","code":"# Validate YAML syntax yaml::yaml.load_file(\"./inputs/sim_design.yaml\")  # Check file encoding # Ensure UTF-8 encoding without BOM"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/troubleshooting.html","id":"enable-debug-mode","dir":"Articles","previous_headings":"Troubleshooting Guide > Debugging Strategies","what":"Enable Debug Mode","title":"Troubleshooting","text":"","code":"# Comprehensive debugging design$sim_prm$debug_mode <- TRUE design$sim_prm$verbose <- TRUE design$sim_prm$save_checkpoints <- TRUE design$sim_prm$checkpoint_freq <- 1000"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/troubleshooting.html","id":"systematic-testing","dir":"Articles","previous_headings":"Troubleshooting Guide > Debugging Strategies","what":"Systematic Testing","title":"Troubleshooting","text":"","code":"# Test with minimal configuration test_design <- Design$new() test_design$sim_prm$pop_size <- 1000 test_design$sim_prm$years <- c(2020, 2022) test_design$sim_prm$mc <- 1 test_design$diseases <- c(\"CHD\") test_design$exposures <- c(\"BMI\")  # Run test simulation test_sim <- Simulation$new(test_design) test_sim$run()"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/troubleshooting.html","id":"log-analysis","dir":"Articles","previous_headings":"Troubleshooting Guide > Debugging Strategies","what":"Log Analysis","title":"Troubleshooting","text":"","code":"# Monitor real-time logs tail -f ./outputs/logs/simulation.log  # Search for specific issues grep -i \"error\\|warning\\|failed\" ./outputs/logs/*.txt  # Check timing information grep \"elapsed\" ./outputs/logs/simulation.log"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/troubleshooting.html","id":"before-reporting-issues","dir":"Articles","previous_headings":"Troubleshooting Guide > Getting Help","what":"Before Reporting Issues","title":"Troubleshooting","text":"Update packages: Ensure latest version Check documentation: Review relevant vignettes Search existing issues: Check GitHub issues similar problems Create minimal example: Reproduce smallest possible case","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/troubleshooting.html","id":"reporting-bugs","dir":"Articles","previous_headings":"Troubleshooting Guide > Getting Help","what":"Reporting Bugs","title":"Troubleshooting","text":"Include following information:","code":"# System information sessionInfo()  # Package version packageVersion(\"IMPACTncdJapan\")  # Configuration used print(design$sim_prm)  # Error message and traceback traceback()"},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/troubleshooting.html","id":"support-channels","dir":"Articles","previous_headings":"Troubleshooting Guide > Getting Help","what":"Support Channels","title":"Troubleshooting","text":"GitHub Issues: Bug reports feature requests GitHub Discussions: Questions community support Email: sensitive private issues","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/articles/troubleshooting.html","id":"emergency-workarounds","dir":"Articles","previous_headings":"Troubleshooting Guide > Getting Help","what":"Emergency Workarounds","title":"Troubleshooting","text":"need immediate results:","code":"# Ultra-minimal simulation emergency_design <- Design$new() emergency_design$sim_prm$pop_size <- 5000 emergency_design$sim_prm$years <- c(2020, 2025) emergency_design$sim_prm$mc <- 1 emergency_design$sim_prm$clusternumber <- 1 emergency_design$diseases <- c(\"CHD\")  # Skip optional components emergency_design$sim_prm$generate_plots <- FALSE emergency_design$sim_prm$store_full_lifecourse <- FALSE"},{"path":"https://christk.github.io/IMPACTncd_Japan/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Chris Kypridemos. Author, maintainer.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Kypridemos C (2025). IMPACTncdJapan: Utility Functions IMPACTncdJapan Model. R package version 0.0.1, https://christk.github.io/IMPACTncd_Japan/.","code":"@Manual{,   title = {IMPACTncdJapan: Utility Functions for IMPACTncdJapan Model},   author = {Chris Kypridemos},   year = {2025},   note = {R package version 0.0.1},   url = {https://christk.github.io/IMPACTncd_Japan/}, }"},{"path":"https://christk.github.io/IMPACTncd_Japan/index.html","id":"impactncd-japan-","dir":"","previous_headings":"","what":"IMPACTncd-Japan: Microsimulation Model","title":"IMPACTncd-Japan: Microsimulation Model","text":"IMPACTncd-Japan population microsimulation model built IMPACTncd framework. simulates Japanese adults’ lifecourse, exposure trajectories (e.g., smoking, BMI, blood pressure), disease onset (CHD, stroke, diabetes, etc.), mortality.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/index.html","id":"what-this-model-does","dir":"","previous_headings":"","what":"What this model does","title":"IMPACTncd-Japan: Microsimulation Model","text":"Baseline analysis: Quantify trends incidence, prevalence, mortality Policy evaluation: Simulate scenarios changing exposure trends disease case fatality Lifecourse modeling: Track individuals entire health journey Population health impact: Assess interventions population level","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/index.html","id":"docker-recommended","dir":"","previous_headings":"Installation","what":"Docker (Recommended)","title":"IMPACTncd-Japan: Microsimulation Model","text":"fastest way get started using pre-built Docker images:","code":"# Download setup script curl -O https://raw.githubusercontent.com/ChristK/IMPACTncd_Japan/refs/heads/main/docker_setup/setup_user_docker_env.sh chmod +x setup_user_docker_env.sh  # Run simulation ./setup_user_docker_env.sh -Tag main -ScenariosDir ./scenarios -SimDesignYaml ./scenarios/sim_design.yaml --UseVolumes"},{"path":"https://christk.github.io/IMPACTncd_Japan/index.html","id":"local-installation","dir":"","previous_headings":"Installation","what":"Local Installation","title":"IMPACTncd-Japan: Microsimulation Model","text":"development prefer local installation:","code":"# Install dependencies install.packages(c(\"Rcpp\", \"data.table\", \"fst\", \"dqrng\", \"gamlss\",                     \"cowplot\", \"mc2d\", \"digest\", \"R6\", \"yaml\", \"foreach\",                     \"BH\", \"igraph\", \"parallelly\", \"parallel\"))  # Install CKutils devtools::install_github(\"ChristK/CKutils\")  # Install IMPACTncdJapan devtools::install_github(\"ChristK/IMPACTncd_Japan\",                           subdir = \"Rpackage/IMPACTncd_Japan_model_pkg\")"},{"path":"https://christk.github.io/IMPACTncd_Japan/index.html","id":"quick-start","dir":"","previous_headings":"","what":"Quick Start","title":"IMPACTncd-Japan: Microsimulation Model","text":"","code":"library(IMPACTncdJapan)  # Create simulation design design <- Design$new() design$read_yaml(\"./inputs/sim_design.yaml\")  # Run simulation sim <- Simulation$new(design) sim$run()  # Export results sim$export_summaries()"},{"path":"https://christk.github.io/IMPACTncd_Japan/index.html","id":"documentation","dir":"","previous_headings":"","what":"Documentation","title":"IMPACTncd-Japan: Microsimulation Model","text":"Quick Start Guide: Get running quickly Installation Guide: Detailed installation instructions Docker Setup: Using Docker containers Running Simulations: Detailed simulation guide Scenario Analysis: Policy evaluation framework","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/index.html","id":"core-classes","dir":"","previous_headings":"Key Features","what":"Core Classes","title":"IMPACTncd-Japan: Microsimulation Model","text":"Design: Simulation configuration parameters Simulation: Main simulation engine SynthPop: Synthetic population generation Disease: Disease progression modeling Exposure: Risk factor trajectory modeling","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/index.html","id":"disease-models","dir":"","previous_headings":"Key Features","what":"Disease Models","title":"IMPACTncd-Japan: Microsimulation Model","text":"Coronary Heart Disease (CHD) Stroke Diabetes COPD Lung Cancer","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/index.html","id":"risk-factors","dir":"","previous_headings":"Key Features","what":"Risk Factors","title":"IMPACTncd-Japan: Microsimulation Model","text":"Body Mass Index (BMI) Smoking Blood Pressure Cholesterol Physical Activity","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/index.html","id":"system-requirements","dir":"","previous_headings":"","what":"System Requirements","title":"IMPACTncd-Japan: Microsimulation Model","text":"R: Version 4.1.0 higher Memory: Minimum 16GB RAM (32GB+ recommended) Storage: 50GB+ free space outputs Compiler: C++17 compatible simulation core requires approximately 12GB RAM.","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/index.html","id":"getting-help","dir":"","previous_headings":"","what":"Getting Help","title":"IMPACTncd-Japan: Microsimulation Model","text":"Issues: Report bugs GitHub Issues Documentation: Visit website Discussions: Use GitHub Discussions","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/index.html","id":"contributing","dir":"","previous_headings":"","what":"Contributing","title":"IMPACTncd-Japan: Microsimulation Model","text":"welcome contributions! Please see Contributing Guide details.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/index.html","id":"license","dir":"","previous_headings":"","what":"License","title":"IMPACTncd-Japan: Microsimulation Model","text":"project licensed GNU General Public License v3.0 - see LICENSE file details.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/index.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"IMPACTncd-Japan: Microsimulation Model","text":"use IMPACTncd-Japan research, please cite:","code":"Kypridemos, C., Crowther, P., Guzman-Castillo, M., Robert, A., Birkett, M., Bandosz, P., & Ogata, S. (2025). IMPACTncd-Japan: A microsimulation model for population health impact assessment in Japan. GitHub: https://github.com/ChristK/IMPACTncd_Japan"},{"path":"https://christk.github.io/IMPACTncd_Japan/index.html","id":"contributors","dir":"","previous_headings":"","what":"Contributors","title":"IMPACTncd-Japan: Microsimulation Model","text":"Chris Kypridemos (University Liverpool) - Lead developer Peter Crowther (Melandra Ltd) - Core infrastructure Maria Guzman-Castillo - Disease modeling Amandine Robert - Validation testing Max Birkett - Documentation Piotr Bandosz - Model design Soshiro Ogata - Japan-specific calibration Copyright (C) 2018-2025 University Liverpool, Chris Kypridemos","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Design.html","id":null,"dir":"Reference","previous_headings":"","what":"R6 Class representing a simulation design — Design","title":"R6 Class representing a simulation design — Design","text":"design sim_prm list holds simulation parameters.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Design.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"R6 Class representing a simulation design — Design","text":"completed...","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Design.html","id":"public-fields","dir":"Reference","previous_headings":"","what":"Public fields","title":"R6 Class representing a simulation design — Design","text":"sim_prm simulation parameters.","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Design.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"R6 Class representing a simulation design — Design","text":"Design$new() Design$save_to_disk() Design$update_fromGUI() Design$print() Design$clone()","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Design.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"R6 Class representing a simulation design — Design","text":"Create new design object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Design.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation design — Design","text":"","code":"Design$new(sim_prm)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Design.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing a simulation design — Design","text":"sim_prm Either path yaml file list appropriate format.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Design.html","id":"returns","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation design — Design","text":"new `Design` object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Design.html","id":"examples","dir":"Reference","previous_headings":"","what":"Examples","title":"R6 Class representing a simulation design — Design","text":"","code":"design <- Design$new(\"./validation/design_for_trends_validation.yaml\")"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Design.html","id":"method-save-to-disk-","dir":"Reference","previous_headings":"","what":"Method save_to_disk()","title":"R6 Class representing a simulation design — Design","text":"Create new design object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Design.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation design — Design","text":"","code":"Design$save_to_disk(path)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Design.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing a simulation design — Design","text":"path Path including file name extension save yaml file simulation parameters.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Design.html","id":"returns-1","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation design — Design","text":"`Design` object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Design.html","id":"method-update-fromgui-","dir":"Reference","previous_headings":"","what":"Method update_fromGUI()","title":"R6 Class representing a simulation design — Design","text":"Updates design object GUI.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Design.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation design — Design","text":"","code":"Design$update_fromGUI(GUI_prm)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Design.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing a simulation design — Design","text":"GUI_prm GUI parameter object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Design.html","id":"returns-2","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation design — Design","text":"`Design` object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Design.html","id":"method-print-","dir":"Reference","previous_headings":"","what":"Method print()","title":"R6 Class representing a simulation design — Design","text":"Print simulation parameters.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Design.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation design — Design","text":"","code":"Design$print()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Design.html","id":"returns-3","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation design — Design","text":"`Design` object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Design.html","id":"method-clone-","dir":"Reference","previous_headings":"","what":"Method clone()","title":"R6 Class representing a simulation design — Design","text":"objects class cloneable method.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Design.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation design — Design","text":"","code":"Design$clone(deep = FALSE)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Design.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing a simulation design — Design","text":"deep Whether make deep clone.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Design.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"R6 Class representing a simulation design — Design","text":"","code":"## ------------------------------------------------ ## Method `Design$new` ## ------------------------------------------------  design <- Design$new(\"./validation/design_for_trends_validation.yaml\") #> Error in base::normalizePath(sim_prm, mustWork = TRUE): path[1]=\"./validation/design_for_trends_validation.yaml\": No such file or directory"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":null,"dir":"Reference","previous_headings":"","what":"R6 Class representing an disease — Disease","title":"R6 Class representing an disease — Disease","text":"disease sim_prm list holds simulation parameters.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"R6 Class representing an disease — Disease","text":"completed...","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"public-fields","dir":"Reference","previous_headings":"","what":"Public fields","title":"R6 Class representing an disease — Disease","text":"name name disease. friendly_name friendly name disease. meta Disease metadata including type. notes notes regarding disease.","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"R6 Class representing an disease — Disease","text":"Disease$new() Disease$gen_parf_files() Disease$gen_parf() Disease$set_init_prvl() Disease$set_rr() Disease$set_incd_prb() Disease$set_dgns_prb() Disease$set_mrtl_prb() Disease$del_parf_file() Disease$get_incd() Disease$get_dur() Disease$get_prvl() Disease$get_ftlt() Disease$get_seed() Disease$get_rr() Disease$del_stochastic_effect() Disease$get_parf() Disease$get_parf_filename() Disease$harmonise_epi_tables() Disease$to_cpp() Disease$print() Disease$clone()","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"R6 Class representing an disease — Disease","text":"Create new disease object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an disease — Disease","text":"","code":"Disease$new(name, friendly_name, meta, notes = NA_character_, design_, RR)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing an disease — Disease","text":"name string disease name. friendly_name string disease friendly name. meta list disease type information incidence, diagnosis, mortality. notes string notes. design_ design object simulation parameters. RR list exposure objects.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"returns","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an disease — Disease","text":"new `Disease` object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"method-gen-parf-files-","dir":"Reference","previous_headings":"","what":"Method gen_parf_files()","title":"R6 Class representing an disease — Disease","text":"Generates PARF stores disk one doesn   exists already.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an disease — Disease","text":"","code":"Disease$gen_parf_files(   design_ = design,   diseases_ = diseases,   popsize = 100,   check = design_$sim_prm$logs,   keep_intermediate_file = TRUE,   bUpdateExistingDiseaseSnapshot = TRUE )"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing an disease — Disease","text":"design_ design object simulation parameters. diseases_ list Disease objects. popsize population size stratum. check Check NAs parf_dt. keep_intermediate_file Whether keep intermediate synthpop file. bUpdateExistingDiseaseSnapshot bool, update existing disease PARF snapshot files necessary.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"returns-1","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an disease — Disease","text":"PARF data.table created, otherwise `NULL`.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"method-gen-parf-","dir":"Reference","previous_headings":"","what":"Method gen_parf()","title":"R6 Class representing an disease — Disease","text":"Read PARF file disk. missing, generates PARF   writes disk.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an disease — Disease","text":"","code":"Disease$gen_parf(   sp = sp,   design_ = design,   diseases_ = diseases,   popsize = 100,   check = design_$sim_prm$logs,   keep_intermediate_file = TRUE )"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing an disease — Disease","text":"sp synthpop object design_ design object simulation parameters. diseases_ list Disease objects popsize population size stratum check Check NAs parf_dt. keep_intermediate_file Whether keep intermediate synthpop file","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"returns-2","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an disease — Disease","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"method-set-init-prvl-","dir":"Reference","previous_headings":"","what":"Method set_init_prvl()","title":"R6 Class representing an disease — Disease","text":"Set disease prevalence & diagnosis new col sp$pop.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an disease — Disease","text":"","code":"Disease$set_init_prvl(sp, design_ = design)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing an disease — Disease","text":"sp synthetic population. design_ design object simulation parameters.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"returns-3","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an disease — Disease","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"method-set-rr-","dir":"Reference","previous_headings":"","what":"Method set_rr()","title":"R6 Class representing an disease — Disease","text":"Set disease incidence probability new col sp$pop.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an disease — Disease","text":"","code":"Disease$set_rr(   sp,   design_ = design,   checkNAs = design_$sim_prm$logs,   forPARF = FALSE )"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"arguments-4","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing an disease — Disease","text":"sp synthetic population. design_ design object simulation parameters. checkNAs `TRUE`, prints table NAs get overwritten 1. Note exposures, NAs expected certain levels exposure (.e. active days). forPARF Set TRUE applied specialised forPARF SynthPop","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"returns-4","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an disease — Disease","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"method-set-incd-prb-","dir":"Reference","previous_headings":"","what":"Method set_incd_prb()","title":"R6 Class representing an disease — Disease","text":"Set disease incident probability new col sp$pop.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"usage-5","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an disease — Disease","text":"","code":"Disease$set_incd_prb(sp, design_ = design)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"arguments-5","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing an disease — Disease","text":"sp synthetic population. design_ design object simulation parameters.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"returns-5","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an disease — Disease","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"method-set-dgns-prb-","dir":"Reference","previous_headings":"","what":"Method set_dgns_prb()","title":"R6 Class representing an disease — Disease","text":"Set diagnosis probability new col sp$pop.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"usage-6","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an disease — Disease","text":"","code":"Disease$set_dgns_prb(sp, design_ = design)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"arguments-6","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing an disease — Disease","text":"sp synthetic population. design_ design object simulation parameters.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"returns-6","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an disease — Disease","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"method-set-mrtl-prb-","dir":"Reference","previous_headings":"","what":"Method set_mrtl_prb()","title":"R6 Class representing an disease — Disease","text":"Set disease case fatality relevant, new col   sp$pop.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"usage-7","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an disease — Disease","text":"","code":"Disease$set_mrtl_prb(sp, design_ = design)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"arguments-7","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing an disease — Disease","text":"sp synthetic population. design_ design object simulation parameters.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"returns-7","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an disease — Disease","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"method-del-parf-file-","dir":"Reference","previous_headings":"","what":"Method del_parf_file()","title":"R6 Class representing an disease — Disease","text":"Deletes PARF file disk.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"usage-8","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an disease — Disease","text":"","code":"Disease$del_parf_file(invert = FALSE)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"arguments-8","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing an disease — Disease","text":"invert deletes disease relevant PARF file except associated current settings.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"returns-8","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an disease — Disease","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"method-get-incd-","dir":"Reference","previous_headings":"","what":"Method get_incd()","title":"R6 Class representing an disease — Disease","text":"Get disease incident probability.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"usage-9","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an disease — Disease","text":"","code":"Disease$get_incd(year_, mc_ = sp$mc_aggr, design_ = design)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"arguments-9","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing an disease — Disease","text":"year_ vector years return. missing. mc_ scalar realise incidence probability. missing. median mc_ = 0 design_ design object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"returns-9","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an disease — Disease","text":"data.table disease incident probabilities unless   incidence type: Universal returns data.table(NULL).","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"method-get-dur-","dir":"Reference","previous_headings":"","what":"Method get_dur()","title":"R6 Class representing an disease — Disease","text":"Get disease duration distribution parameters.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"usage-10","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an disease — Disease","text":"","code":"Disease$get_dur(mc_ = sp$mc_aggr)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"arguments-10","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing an disease — Disease","text":"mc_ scalar realise incidence probability. missing. median mc_ = 0","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"returns-10","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an disease — Disease","text":"data.table duration distribution parameters. unless   incidence type: Universal returns data.table(NULL).","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"method-get-prvl-","dir":"Reference","previous_headings":"","what":"Method get_prvl()","title":"R6 Class representing an disease — Disease","text":"Get disease prevalent probability.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"usage-11","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an disease — Disease","text":"","code":"Disease$get_prvl(year_, mc_ = sp$mc_aggr, design_ = design)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"arguments-11","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing an disease — Disease","text":"year_ vector years return. missing. mc_ scalar realise prevalence probability. missing. median mc_ = 0 design_ design object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"returns-11","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an disease — Disease","text":"data.table disease prevalent probabilities unless   incidence type: Universal returns data.table(NULL).","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"method-get-ftlt-","dir":"Reference","previous_headings":"","what":"Method get_ftlt()","title":"R6 Class representing an disease — Disease","text":"Get disease case fatality probability.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"usage-12","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an disease — Disease","text":"","code":"Disease$get_ftlt(year_, mc_ = sp$mc_aggr, design_ = design)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"arguments-12","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing an disease — Disease","text":"year_ vector years return. missing. mc_ scalar realise incidence probability. missing. median mc_ = 0 design_ design object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"returns-12","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an disease — Disease","text":"data.table disease case fatality probabilities unless mortality type: Non-fatal returns data.table(NULL).","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"method-get-seed-","dir":"Reference","previous_headings":"","what":"Method get_seed()","title":"R6 Class representing an disease — Disease","text":"Get seed RNG.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"usage-13","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an disease — Disease","text":"","code":"Disease$get_seed()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"returns-13","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an disease — Disease","text":"seed RNG produced digest disease   name outcome.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"method-get-rr-","dir":"Reference","previous_headings":"","what":"Method get_rr()","title":"R6 Class representing an disease — Disease","text":"Get list rr relevant exposures.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"usage-14","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an disease — Disease","text":"","code":"Disease$get_rr()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"returns-14","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an disease — Disease","text":"list exposure objects.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"method-del-stochastic-effect-","dir":"Reference","previous_headings":"","what":"Method del_stochastic_effect()","title":"R6 Class representing an disease — Disease","text":"Deletes stochastic effect files indices disk   relevant RR.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"usage-15","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an disease — Disease","text":"","code":"Disease$del_stochastic_effect()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"returns-15","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an disease — Disease","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"method-get-parf-","dir":"Reference","previous_headings":"","what":"Method get_parf()","title":"R6 Class representing an disease — Disease","text":"Get PARF age/sex.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"usage-16","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an disease — Disease","text":"","code":"Disease$get_parf(what)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"arguments-13","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing an disease — Disease","text":"Columns return (p0, m0, parf)","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"returns-16","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an disease — Disease","text":"data.table PARF.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"method-get-parf-filename-","dir":"Reference","previous_headings":"","what":"Method get_parf_filename()","title":"R6 Class representing an disease — Disease","text":"Get PARF filename.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"usage-17","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an disease — Disease","text":"","code":"Disease$get_parf_filename()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"returns-17","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an disease — Disease","text":"data.table PARF.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"method-harmonise-epi-tables-","dir":"Reference","previous_headings":"","what":"Method harmonise_epi_tables()","title":"R6 Class representing an disease — Disease","text":"Harmonises classes levels synthetic   population incidence/prevalence/fatality tables. saves   harmonised table disk, overwriting existing one.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"usage-18","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an disease — Disease","text":"","code":"Disease$harmonise_epi_tables(sp, verbose = FALSE)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"arguments-14","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing an disease — Disease","text":"sp synthetic population. verbose Logical. TRUE, print row number table processed estimate shape1 shape2.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"returns-18","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an disease — Disease","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"method-to-cpp-","dir":"Reference","previous_headings":"","what":"Method to_cpp()","title":"R6 Class representing an disease — Disease","text":"Returns list pass C++ side Chris' parser.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"usage-19","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an disease — Disease","text":"","code":"Disease$to_cpp(sp, design_ = design, scenario_name, scenario_suffix = \"\")"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"arguments-15","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing an disease — Disease","text":"sp synthetic population. design_ design object simulation parameters. scenario_name string scenario name. Currently used kismet == FALSE generate new seeds scenario. scenario_suffix suffix identify columns different scenarios.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"returns-19","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an disease — Disease","text":"list.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"method-print-","dir":"Reference","previous_headings":"","what":"Method print()","title":"R6 Class representing an disease — Disease","text":"Print simulation parameters.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"usage-20","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an disease — Disease","text":"","code":"Disease$print()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"returns-20","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an disease — Disease","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"method-clone-","dir":"Reference","previous_headings":"","what":"Method clone()","title":"R6 Class representing an disease — Disease","text":"objects class cloneable method.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"usage-21","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an disease — Disease","text":"","code":"Disease$clone(deep = FALSE)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Disease.html","id":"arguments-16","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing an disease — Disease","text":"deep Whether make deep clone.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":null,"dir":"Reference","previous_headings":"","what":"R6 Class representing an exposure — Exposure","title":"R6 Class representing an exposure — Exposure","text":"exposure object RR exposure disease.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"R6 Class representing an exposure — Exposure","text":"completed...","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"public-fields","dir":"Reference","previous_headings":"","what":"Public fields","title":"R6 Class representing an exposure — Exposure","text":"name name exposure. outcome name outcome exposure influences. lag Disease lag. distribution distribution used Monte Carlo. Currently lognormal normal supported. source Citation info effect size. notes notes regarding exposure -> outcome relation.","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"R6 Class representing an exposure — Exposure","text":"Exposure$new() Exposure$gen_stochastic_effect() Exposure$del_stochastic_effect() Exposure$get_rr() Exposure$clear_cache() Exposure$xps_to_rr() Exposure$validate_rr() Exposure$get_input_rr() Exposure$get_metadata() Exposure$get_seed() Exposure$write_xps_tmplte_file() Exposure$convert_from_old_format() Exposure$get_lag() Exposure$get_ideal_xps_lvl() Exposure$get_name() Exposure$print() Exposure$clone()","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"R6 Class representing an exposure — Exposure","text":"Reads exposure parameter file creates new exposure object..","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an exposure — Exposure","text":"","code":"Exposure$new(sRelativeRiskByPopulationSubsetForExposureFilePath, design)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing an exposure — Exposure","text":"sRelativeRiskByPopulationSubsetForExposureFilePath string, path .csvy file detailing relative risk (RR) population subset (age, sex, maybe decile 'Index Multiple Deprivation' DIMD) specific exposure. File header may contain exposure parameters. design design object simulation parameters.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"returns","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an exposure — Exposure","text":"`Exposure` object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"examples","dir":"Reference","previous_headings":"","what":"Examples","title":"R6 Class representing an exposure — Exposure","text":"","code":"af_stroke$read_xps_prm(\"./inputs/RR/af_stroke.csvy\", design)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"method-gen-stochastic-effect-","dir":"Reference","previous_headings":"","what":"Method gen_stochastic_effect()","title":"R6 Class representing an exposure — Exposure","text":"Generates write disk stochastic effect.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an exposure — Exposure","text":"","code":"Exposure$gen_stochastic_effect(   design_ = design,   overwrite = FALSE,   smooth,   ... )"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing an exposure — Exposure","text":"design_ design object simulation parameters. overwrite TRUE overwrite files. Else files exist regenerated. smooth true applies loess smoothing input relative risks ... arguments passed `loess`, usually span = 0.7, degree = 1","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"returns-1","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an exposure — Exposure","text":"`Exposure` object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"examples-1","dir":"Reference","previous_headings":"","what":"Examples","title":"R6 Class representing an exposure — Exposure","text":"","code":"af_stroke <- Exposure$new(\"af\", \"stroke\") af_stroke$read_xps_prm(\"./inputs/RR/af_stroke.csvy\", design) af_stroke$gen_stochastic_effect(design, TRUE)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"method-del-stochastic-effect-","dir":"Reference","previous_headings":"","what":"Method del_stochastic_effect()","title":"R6 Class representing an exposure — Exposure","text":"Deletes stochastic effect file index disk.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an exposure — Exposure","text":"","code":"Exposure$del_stochastic_effect(invert = FALSE)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing an exposure — Exposure","text":"invert TRUE keeps  file current checksum deletes files exposure~outcome.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"returns-2","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an exposure — Exposure","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"method-get-rr-","dir":"Reference","previous_headings":"","what":"Method get_rr()","title":"R6 Class representing an exposure — Exposure","text":"Get relative risks disk.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an exposure — Exposure","text":"","code":"Exposure$get_rr(mc, design_ = design, drop = FALSE, plot_rr = FALSE)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing an exposure — Exposure","text":"mc integer signifies Monte Carlo iteration. design_ design object simulation parameters. drop `TRUE` returns scalar numeric RR RR common age groups sexes. Otherwise, data.table. plot_rr TRUE, plots relative risk","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"returns-3","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an exposure — Exposure","text":"data.table stochastic relative risks, stochastic   = TRUE mc > 0; else, deterministic relative risks.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"method-clear-cache-","dir":"Reference","previous_headings":"","what":"Method clear_cache()","title":"R6 Class representing an exposure — Exposure","text":"Clear cache get_rr.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an exposure — Exposure","text":"","code":"Exposure$clear_cache()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"returns-4","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an exposure — Exposure","text":"`Exposure` object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"method-xps-to-rr-","dir":"Reference","previous_headings":"","what":"Method xps_to_rr()","title":"R6 Class representing an exposure — Exposure","text":"Apply RR new column sp$pop based   exposure level. case smok_quit_yrs modifies risk   smok_cig packyrs new column created.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"usage-5","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an exposure — Exposure","text":"","code":"Exposure$xps_to_rr(   sp_,   design_,   checkNAs = design_$sim_prm$logs,   forPARF = FALSE )"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"arguments-4","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing an exposure — Exposure","text":"sp_ synthetic population. design_ design object simulation parameters. checkNAs `TRUE`, prints table NAs get overwritten 1. Note exposures, NAs expected certain levels exposure (.e. active days). forPARF Set TRUE applied specialised forPARF SynthPop","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"returns-5","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an exposure — Exposure","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"method-validate-rr-","dir":"Reference","previous_headings":"","what":"Method validate_rr()","title":"R6 Class representing an exposure — Exposure","text":"Get relative risks disk.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"usage-6","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an exposure — Exposure","text":"","code":"Exposure$validate_rr()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"returns-6","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an exposure — Exposure","text":"plot input stochastic relative risks.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"method-get-input-rr-","dir":"Reference","previous_headings":"","what":"Method get_input_rr()","title":"R6 Class representing an exposure — Exposure","text":"Get original input relative risks age sex.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"usage-7","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an exposure — Exposure","text":"","code":"Exposure$get_input_rr()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"returns-7","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an exposure — Exposure","text":"copied data.table original relative risks.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"method-get-metadata-","dir":"Reference","previous_headings":"","what":"Method get_metadata()","title":"R6 Class representing an exposure — Exposure","text":"Get original metadata.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"usage-8","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an exposure — Exposure","text":"","code":"Exposure$get_metadata()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"returns-8","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an exposure — Exposure","text":"list original metadata.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"method-get-seed-","dir":"Reference","previous_headings":"","what":"Method get_seed()","title":"R6 Class representing an exposure — Exposure","text":"Get seed RNG.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"usage-9","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an exposure — Exposure","text":"","code":"Exposure$get_seed()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"returns-9","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an exposure — Exposure","text":"seed RNG produced digest exposure   name outcome.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"method-write-xps-tmplte-file-","dir":"Reference","previous_headings":"","what":"Method write_xps_tmplte_file()","title":"R6 Class representing an exposure — Exposure","text":"Writes template exposure file disk.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"usage-10","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an exposure — Exposure","text":"","code":"Exposure$write_xps_tmplte_file(file_path = \"./inputs/RR/template.csvy\")"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"arguments-5","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing an exposure — Exposure","text":"file_path Path including file name .csvy extension write file placeholder exposure parameters.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"returns-10","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an exposure — Exposure","text":"`Exposure` object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"method-convert-from-old-format-","dir":"Reference","previous_headings":"","what":"Method convert_from_old_format()","title":"R6 Class representing an exposure — Exposure","text":"Convert old format .csv new format .csvy.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"usage-11","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an exposure — Exposure","text":"","code":"Exposure$convert_from_old_format(   old_file,   metadata,   file_path,   estimates = NULL,   second_estimate_is_p = FALSE )"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"arguments-6","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing an exposure — Exposure","text":"old_file Path old format .csv file RR. metadata List metadata information. file_path Path including file name .csvy extension write new file. estimates used old_file missing. vector length 2 1st element point estimate 2nd one CI. second_estimate_is_p `TRUE` `estimates` `NULL` second element `estimates` interpreted like p-value ratio rather CI.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"returns-11","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an exposure — Exposure","text":"`Exposure` object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"method-get-lag-","dir":"Reference","previous_headings":"","what":"Method get_lag()","title":"R6 Class representing an exposure — Exposure","text":"Get exposure lag.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"usage-12","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an exposure — Exposure","text":"","code":"Exposure$get_lag(mc_)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"arguments-7","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing an exposure — Exposure","text":"mc_ vector Monte Carlo iterations. missing 0 return median (= mean).","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"returns-12","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an exposure — Exposure","text":"integer vector exposure~disease lag.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"method-get-ideal-xps-lvl-","dir":"Reference","previous_headings":"","what":"Method get_ideal_xps_lvl()","title":"R6 Class representing an exposure — Exposure","text":"Get ideal exposure level.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"usage-13","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an exposure — Exposure","text":"","code":"Exposure$get_ideal_xps_lvl(mc_)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"arguments-8","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing an exposure — Exposure","text":"mc_ vector Monte Carlo iterations. missing 0 return user input lag.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"returns-13","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an exposure — Exposure","text":"integer vector exposure~disease lag.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"method-get-name-","dir":"Reference","previous_headings":"","what":"Method get_name()","title":"R6 Class representing an exposure — Exposure","text":"Get name object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"usage-14","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an exposure — Exposure","text":"","code":"Exposure$get_name()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"returns-14","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an exposure — Exposure","text":"string.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"method-print-","dir":"Reference","previous_headings":"","what":"Method print()","title":"R6 Class representing an exposure — Exposure","text":"Print simulation parameters.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"usage-15","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an exposure — Exposure","text":"","code":"Exposure$print()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"returns-15","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing an exposure — Exposure","text":"`Exposure` object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"method-clone-","dir":"Reference","previous_headings":"","what":"Method clone()","title":"R6 Class representing an exposure — Exposure","text":"objects class cloneable method.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"usage-16","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing an exposure — Exposure","text":"","code":"Exposure$clone(deep = FALSE)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"arguments-9","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing an exposure — Exposure","text":"deep Whether make deep clone.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Exposure.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"R6 Class representing an exposure — Exposure","text":"","code":"## ------------------------------------------------ ## Method `Exposure$new` ## ------------------------------------------------  af_stroke$read_xps_prm(\"./inputs/RR/af_stroke.csvy\", design) #> Error: object 'af_stroke' not found  ## ------------------------------------------------ ## Method `Exposure$gen_stochastic_effect` ## ------------------------------------------------  af_stroke <- Exposure$new(\"af\", \"stroke\") #> Error in normalizePath(sRelativeRiskByPopulationSubsetForExposureFilePath,     mustWork = TRUE): path[1]=\"af\": No such file or directory af_stroke$read_xps_prm(\"./inputs/RR/af_stroke.csvy\", design) #> Error: object 'af_stroke' not found af_stroke$gen_stochastic_effect(design, TRUE) #> Error: object 'af_stroke' not found"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/IMPACTncdJapan.html","id":null,"dir":"Reference","previous_headings":"","what":"IMPACTncdJapan: A package with functions for the IMPACTncdJapan model. — IMPACTncdJapan","title":"IMPACTncdJapan: A package with functions for the IMPACTncdJapan model. — IMPACTncdJapan","text":"Description package.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/IMPACTncdJapan.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"IMPACTncdJapan: A package with functions for the IMPACTncdJapan model. — IMPACTncdJapan","text":"","code":"`:=`(...)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/IMPACTncdJapan.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"IMPACTncdJapan: A package with functions for the IMPACTncdJapan model. — IMPACTncdJapan","text":"Chris Kypridemos","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":null,"dir":"Reference","previous_headings":"","what":"R6 Class representing a simulation environment — Simulation","title":"R6 Class representing a simulation environment — Simulation","text":"simulation environment.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"R6 Class representing a simulation environment — Simulation","text":"completed...","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"note","dir":"Reference","previous_headings":"","what":"Note","title":"R6 Class representing a simulation environment — Simulation","text":"calibration parameters stored `./simulation/calibration_prms.csv`   automatically applied subsequent simulations.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"calibration-process","dir":"Reference","previous_headings":"","what":"Calibration Process","title":"R6 Class representing a simulation environment — Simulation","text":"calibration operates specific time period defined two key parameters: **Start year**: initial year designated sim_design yaml file **End year**: latest year defined sim_horizon sim_design yaml file calibration process follows steps age `ageL` `ageH`:","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"-incidence-calibration","dir":"Reference","previous_headings":"","what":"1. Incidence Calibration","title":"R6 Class representing a simulation environment — Simulation","text":"CHD stroke: Runs simulation extracts uncalibrated incidence rates Fits log-log linear models benchmark simulated data calibration period Calculates calibration factors align simulated trends benchmark trends Updates prevalence estimates based incidence corrections","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"-case-fatality-calibration","dir":"Reference","previous_headings":"","what":"2. Case Fatality Calibration","title":"R6 Class representing a simulation environment — Simulation","text":"CHD, stroke, non-modeled causes: Incorporates incidence-corrected prevalence estimates Calculates calibration factors case fatality rates Ensures mortality rates align benchmark data Applies competing risk adjustments previous ages","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"implementation-details","dir":"Reference","previous_headings":"","what":"Implementation Details","title":"R6 Class representing a simulation environment — Simulation","text":"**Sequential Processing**: Ages processed sequentially ensure proper     prevalence carryover age groups **Trend Modeling**: Uses log-log linear regression capture temporal trends     calibration period **Robust Estimation**: Employs median-based estimators handle     rare events reduce Monte Carlo variability","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"public-fields","dir":"Reference","previous_headings":"","what":"Public fields","title":"R6 Class representing a simulation environment — Simulation","text":"design Design object. diseases list Disease objects. RR list RR simulated exposures. scenarios list scenario objects.","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"R6 Class representing a simulation environment — Simulation","text":"Simulation$new() Simulation$update_primary_prevention_scn() Simulation$get_primary_prevention_scn() Simulation$update_secondary_prevention_scn() Simulation$get_secondary_prevention_scn() Simulation$run() Simulation$calibrate_incd_ftlt() Simulation$export_summaries() Simulation$export_tables() Simulation$get_causal_structure() Simulation$get_node_names() Simulation$get_causal_path() Simulation$update_design() Simulation$del_outputs() Simulation$del_summaries() Simulation$del_logs() Simulation$del_parfs() Simulation$del_RR_cache() Simulation$del_synthpops() Simulation$get_esp() Simulation$get_mm_weights() Simulation$validate() Simulation$split_large_files() Simulation$reconstruct_large_files() Simulation$del_large_files() Simulation$print() Simulation$clone()","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"R6 Class representing a simulation environment — Simulation","text":"Create new simulation object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"Simulation$new(sim_prm)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing a simulation environment — Simulation","text":"sim_prm Either path yaml file Design object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"returns","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation environment — Simulation","text":"new `Simulation` object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"method-update-primary-prevention-scn-","dir":"Reference","previous_headings":"","what":"Method update_primary_prevention_scn()","title":"R6 Class representing a simulation environment — Simulation","text":"Updates primary prevention policy scenario","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"Simulation$update_primary_prevention_scn(method)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing a simulation environment — Simulation","text":"method function synthpop argument models primary prevention policy.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"returns-1","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation environment — Simulation","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"method-get-primary-prevention-scn-","dir":"Reference","previous_headings":"","what":"Method get_primary_prevention_scn()","title":"R6 Class representing a simulation environment — Simulation","text":"Get primary prevention policy scenario","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"Simulation$get_primary_prevention_scn()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"returns-2","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation environment — Simulation","text":"primary prevention policy scenario.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"method-update-secondary-prevention-scn-","dir":"Reference","previous_headings":"","what":"Method update_secondary_prevention_scn()","title":"R6 Class representing a simulation environment — Simulation","text":"Updates secondary prevention policy scenario","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"Simulation$update_secondary_prevention_scn(method)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing a simulation environment — Simulation","text":"method function synthpop argument models secondary prevention policy.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"returns-3","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation environment — Simulation","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"method-get-secondary-prevention-scn-","dir":"Reference","previous_headings":"","what":"Method get_secondary_prevention_scn()","title":"R6 Class representing a simulation environment — Simulation","text":"Get secondary prevention policy scenario","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"Simulation$get_secondary_prevention_scn()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"returns-4","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation environment — Simulation","text":"secondary prevention policy scenario.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"method-run-","dir":"Reference","previous_headings":"","what":"Method run()","title":"R6 Class representing a simulation environment — Simulation","text":"Runs simulation","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"usage-5","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"Simulation$run(mc, multicore = TRUE, scenario_nam)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing a simulation environment — Simulation","text":"mc positive sequential integer vector Monte Carlo iterations synthetic population simulate, scalar. multicore TRUE run simulation parallel. scenario_nam string scenario name (.e. sc1)","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"returns-5","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation environment — Simulation","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"method-calibrate-incd-ftlt-","dir":"Reference","previous_headings":"","what":"Method calibrate_incd_ftlt()","title":"R6 Class representing a simulation environment — Simulation","text":"Generates new calibration parameters incidence case fatality rates. method implements sequential age-based calibration process aligns modeled disease incidence case fatality rates user input data external sources (e.g., GBD, national statistics). calibration ensures simulation outputs match observed epidemiological patterns.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"usage-6","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"Simulation$calibrate_incd_ftlt(mc, replace = FALSE)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"arguments-4","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing a simulation environment — Simulation","text":"mc positive sequential integer vector Monte Carlo iterations synthetic population simulate, scalar. replace TRUE calibration deletes previous calibration file starts scratch. FALSE, continues last uncalibrated age.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"returns-6","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation environment — Simulation","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"method-export-summaries-","dir":"Reference","previous_headings":"","what":"Method export_summaries()","title":"R6 Class representing a simulation environment — Simulation","text":"Process lifecourse files","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"usage-7","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"Simulation$export_summaries(   multicore = TRUE,   type = c(\"le\", \"hle\", \"dis_char\", \"prvl\", \"incd\", \"dis_mrtl\", \"mrtl\",     \"all_cause_mrtl_by_dis\", \"cms\", \"qalys\", \"costs\"),   single_year_of_age = FALSE )"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"arguments-5","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing a simulation environment — Simulation","text":"multicore TRUE run simulation parallel. type type summary extract. single_year_of_age Export summaries single year age. Useful calibration proccess.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"returns-7","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation environment — Simulation","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"method-export-tables-","dir":"Reference","previous_headings":"","what":"Method export_tables()","title":"R6 Class representing a simulation environment — Simulation","text":"Export summary tables simulation results. method generates exports summary tables main simulation outputs, including prevalence, incidence, mortality, disease characteristics, exposures. calls modular helper methods type summary, ensuring output directories created needed tables written appropriate locations.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"usage-8","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"Simulation$export_tables(   baseline_year_for_change_outputs = 2019L,   prbl = c(0.5, 0.025, 0.975, 0.1, 0.9) )"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"arguments-6","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing a simulation environment — Simulation","text":"baseline_year_for_change_outputs Integer. baseline year use change outputs (default: 2019L). prbl Numeric vector. quantiles use summary statistics (default: c(0.5, 0.025, 0.975, 0.1, 0.9)).","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"details-1","dir":"Reference","previous_headings":"","what":"Details","title":"R6 Class representing a simulation environment — Simulation","text":"method high-level wrapper orchestrates export main summary tables. delegates actual export logic following private helper methods: - private$export_main_tables - private$export_all_cause_mrtl_tables - private$export_disease_characteristics_tables - private$export_xps_tables helper method responsible specific set outputs ensures results saved correct format location.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"returns-8","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation environment — Simulation","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"examples","dir":"Reference","previous_headings":"","what":"Examples","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"IMPACTncd$export_tables()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"method-get-causal-structure-","dir":"Reference","previous_headings":"","what":"Method get_causal_structure()","title":"R6 Class representing a simulation environment — Simulation","text":"Returns causality matrix optionally plots   causality structure.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"usage-9","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"Simulation$get_causal_structure(   processed = TRUE,   print_plot = FALSE,   focus = FALSE )"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"arguments-7","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing a simulation environment — Simulation","text":"processed `TRUE` generates causality matrix graph. print_plot `TRUE` prints causal structure graph. focus missing whole causal structure returned. Otherwise, named node subgraph 1st order neighbours point given vertrice returned.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"returns-9","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation environment — Simulation","text":"processed causality matrix `processed = TRUE`   graph otherwise.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"method-get-node-names-","dir":"Reference","previous_headings":"","what":"Method get_node_names()","title":"R6 Class representing a simulation environment — Simulation","text":"Returns names exposures diseases.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"usage-10","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"Simulation$get_node_names()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"returns-10","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation environment — Simulation","text":"string vector.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"method-get-causal-path-","dir":"Reference","previous_headings":"","what":"Method get_causal_path()","title":"R6 Class representing a simulation environment — Simulation","text":"Returns causal paths exposure outcome (disease).","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"usage-11","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"Simulation$get_causal_path(from, to, shortest_paths = FALSE)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"arguments-8","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing a simulation environment — Simulation","text":"beginning path (exposure) string. Use `get_node_names` available nodes. end path (disease) string. Use `get_node_names` available nodes. shortest_paths Boolean. true, returns paths smallest number nodes. Else, possible paths (excluding multiple loop edges) returned.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"returns-11","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation environment — Simulation","text":"list possible paths exposure disease.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"method-update-design-","dir":"Reference","previous_headings":"","what":"Method update_design()","title":"R6 Class representing a simulation environment — Simulation","text":"Updates Design object stored Simulation   object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"usage-12","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"Simulation$update_design(new_design)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"arguments-9","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing a simulation environment — Simulation","text":"new_design design object simulation parameters.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"returns-12","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation environment — Simulation","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"method-del-outputs-","dir":"Reference","previous_headings":"","what":"Method del_outputs()","title":"R6 Class representing a simulation environment — Simulation","text":"Delete output files folders first level.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"usage-13","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"Simulation$del_outputs()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"returns-13","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation environment — Simulation","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"method-del-summaries-","dir":"Reference","previous_headings":"","what":"Method del_summaries()","title":"R6 Class representing a simulation environment — Simulation","text":"Delete output summary files subdirectories preserving first-level directory structure.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"usage-14","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"Simulation$del_summaries()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"returns-14","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation environment — Simulation","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"method-del-logs-","dir":"Reference","previous_headings":"","what":"Method del_logs()","title":"R6 Class representing a simulation environment — Simulation","text":"Delete log files.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"usage-15","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"Simulation$del_logs()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"returns-15","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation environment — Simulation","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"method-del-parfs-","dir":"Reference","previous_headings":"","what":"Method del_parfs()","title":"R6 Class representing a simulation environment — Simulation","text":"Delete files ./simulation/parf folder.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"usage-16","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"Simulation$del_parfs()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"returns-16","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation environment — Simulation","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"method-del-rr-cache-","dir":"Reference","previous_headings":"","what":"Method del_RR_cache()","title":"R6 Class representing a simulation environment — Simulation","text":"Delete files ./simulation/rr folder.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"usage-17","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"Simulation$del_RR_cache()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"returns-17","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation environment — Simulation","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"method-del-synthpops-","dir":"Reference","previous_headings":"","what":"Method del_synthpops()","title":"R6 Class representing a simulation environment — Simulation","text":"Delete files synthpop folder.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"usage-18","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"Simulation$del_synthpops()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"returns-18","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation environment — Simulation","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"method-get-esp-","dir":"Reference","previous_headings":"","what":"Method get_esp()","title":"R6 Class representing a simulation environment — Simulation","text":"Get European Standardised Population 2013 sex   dimd.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"usage-19","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"Simulation$get_esp()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"returns-19","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation environment — Simulation","text":"data.table European Standardised Population 2013.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"method-get-mm-weights-","dir":"Reference","previous_headings":"","what":"Method get_mm_weights()","title":"R6 Class representing a simulation environment — Simulation","text":"Get disease multimorbidity weights (.e. Cambridge   Morbidity Score weights).","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"usage-20","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"Simulation$get_mm_weights()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"returns-20","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation environment — Simulation","text":"named vector disease weights.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"method-validate-","dir":"Reference","previous_headings":"","what":"Method validate()","title":"R6 Class representing a simulation environment — Simulation","text":"Internal validation disease burden.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"usage-21","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"Simulation$validate()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"returns-21","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation environment — Simulation","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"method-split-large-files-","dir":"Reference","previous_headings":"","what":"Method split_large_files()","title":"R6 Class representing a simulation environment — Simulation","text":"Splits files larger 50Mb chunks 49Mb.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"usage-22","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"Simulation$split_large_files()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"details-2","dir":"Reference","previous_headings":"","what":"Details","title":"R6 Class representing a simulation environment — Simulation","text":"function splits files larger 50Mb chunks 49Mb can tracked GitHub. large files deleted index created \"./simulation/large_files_indx.csv\" can reconstructed. function also adds large files `.gitignore`. works Linux Windows. Untested Mac.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"returns-22","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation environment — Simulation","text":"invisible `Simulation` object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"method-reconstruct-large-files-","dir":"Reference","previous_headings":"","what":"Method reconstruct_large_files()","title":"R6 Class representing a simulation environment — Simulation","text":"Reconstructs large files chunks.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"usage-23","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"Simulation$reconstruct_large_files()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"details-3","dir":"Reference","previous_headings":"","what":"Details","title":"R6 Class representing a simulation environment — Simulation","text":"function reconstructs large files chunks. path files stored \"./simulation/large_files_indx.csv\". works Linux Windows. Untested Mac.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"returns-23","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation environment — Simulation","text":"invisible `Simulation` object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"method-del-large-files-","dir":"Reference","previous_headings":"","what":"Method del_large_files()","title":"R6 Class representing a simulation environment — Simulation","text":"Deletes large files.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"usage-24","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"Simulation$del_large_files()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"details-4","dir":"Reference","previous_headings":"","what":"Details","title":"R6 Class representing a simulation environment — Simulation","text":"function deletes large files stored chunks. path files stored \"./simulation/large_files_indx.csv\".","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"returns-24","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation environment — Simulation","text":"invisible `Simulation` object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"method-print-","dir":"Reference","previous_headings":"","what":"Method print()","title":"R6 Class representing a simulation environment — Simulation","text":"Prints simulation object metadata.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"usage-25","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"Simulation$print()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"returns-25","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a simulation environment — Simulation","text":"invisible `Simulation` object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"method-clone-","dir":"Reference","previous_headings":"","what":"Method clone()","title":"R6 Class representing a simulation environment — Simulation","text":"objects class cloneable method.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"usage-26","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"Simulation$clone(deep = FALSE)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"arguments-10","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing a simulation environment — Simulation","text":"deep Whether make deep clone.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/Simulation.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"R6 Class representing a simulation environment — Simulation","text":"","code":"## ------------------------------------------------ ## Method `Simulation$export_tables` ## ------------------------------------------------  IMPACTncd$export_tables() #> Error: object 'IMPACTncd' not found"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":null,"dir":"Reference","previous_headings":"","what":"R6 Class representing a synthetic population — SynthPop","title":"R6 Class representing a synthetic population — SynthPop","text":"synthpop `pop` field contains life course simulants `data.table`.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"R6 Class representing a synthetic population — SynthPop","text":"completed...","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"public-fields","dir":"Reference","previous_headings":"","what":"Public fields","title":"R6 Class representing a synthetic population — SynthPop","text":"mc Monte Carlo iteration synthetic population fragment. Every integer generates unique synthetic population fragment. mc_aggr Monte Carlo iteration synthetic population used multiple synthetic population fragments getting aggregated. instance synthpop consists 2 fragments, mc_aggr , mc differ. ensures correct seeds RNGs simulation RRs lags. metadata Metadata synthpop. pop data.table contains life-course simulants. file exists, loaded disk. , first generated, saved disk, loaded disk.","code":""},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"public-methods","dir":"Reference","previous_headings":"","what":"Public methods","title":"R6 Class representing a synthetic population — SynthPop","text":"SynthPop$new() SynthPop$update_design() SynthPop$update_pop_weights() SynthPop$delete_synthpop() SynthPop$delete_incomplete_synthpop() SynthPop$check_integridy() SynthPop$count_synthpop() SynthPop$get_checksum() SynthPop$get_filename() SynthPop$get_design() SynthPop$get_dir() SynthPop$gen_synthpop_demog() SynthPop$write_synthpop() SynthPop$get_risks() SynthPop$store_risks() SynthPop$print() SynthPop$clone()","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"method-new-","dir":"Reference","previous_headings":"","what":"Method new()","title":"R6 Class representing a synthetic population — SynthPop","text":"Create new SynthPop object. synthpop file fst-package format already exists, synthpop loaded . Otherwise generated scratch saved `filename` fst-package format. Two additional files saved 'synthpop'. metadata file, index file.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"usage","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a synthetic population — SynthPop","text":"","code":"SynthPop$new(mc_, design_)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing a synthetic population — SynthPop","text":"mc_ Monte Carlo iteration synthetic population. integer generates unique synthetic population. `mc = 0` object empty synthpop initiated. design_ Design object. synthpop_dir_ directory 'SynthPop' objects stored. synthpop file fst-package format. `filename` already exists, synthpop loaded . Otherwise generated scratch saved `filename` fst-package format. Two additional files saved 'synthpop'. metadata file, index file.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"returns","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a synthetic population — SynthPop","text":"new `SynthPop` object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"examples","dir":"Reference","previous_headings":"","what":"Examples","title":"R6 Class representing a synthetic population — SynthPop","text":"","code":"design <- Design$new(\"./validation/design_for_trends_validation.yaml\") POP$write_synthpop(1:6, design) POP <- SynthPop$new(4L, design) POP$print() POP$count_synthpop()  POP$delete_synthpop(1L) POP$delete_synthpop(5:6) POP$get_filename()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"method-update-design-","dir":"Reference","previous_headings":"","what":"Method update_design()","title":"R6 Class representing a synthetic population — SynthPop","text":"Updates Design object stored SynthPop object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"usage-1","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a synthetic population — SynthPop","text":"","code":"SynthPop$update_design(design_ = design)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"arguments-1","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing a synthetic population — SynthPop","text":"design_ design object simulation parameters.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"returns-1","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a synthetic population — SynthPop","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"method-update-pop-weights-","dir":"Reference","previous_headings":"","what":"Method update_pop_weights()","title":"R6 Class representing a synthetic population — SynthPop","text":"Updates wt_immrtl account mortality baseline scenario.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"usage-2","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a synthetic population — SynthPop","text":"","code":"SynthPop$update_pop_weights(scenario_nam = \"sc0\")"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"arguments-2","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing a synthetic population — SynthPop","text":"scenario_nam scenario name. Logic different \"sc0\".","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"returns-2","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a synthetic population — SynthPop","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"method-delete-synthpop-","dir":"Reference","previous_headings":"","what":"Method delete_synthpop()","title":"R6 Class representing a synthetic population — SynthPop","text":"Delete () synthpop files synthpop directory.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"usage-3","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a synthetic population — SynthPop","text":"","code":"SynthPop$delete_synthpop(mc_, check_checksum = TRUE, invert = FALSE)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"arguments-3","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing a synthetic population — SynthPop","text":"mc_ `mc_ = NULL`, delete files synthpop directory. `mc_` integer vector delete specific synthpop files including metadata index files. check_checksum  `TRUE` delete files checksum synthpop. relevant `mc_ = NULL`. invert `TRUE` (default `FALSE`) keeps files checksum synthpop deletes synthpops. relevant `mc_ = NULL` `check_checksum = TRUE`.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"returns-3","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a synthetic population — SynthPop","text":"invisible `SynthPop` object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"method-delete-incomplete-synthpop-","dir":"Reference","previous_headings":"","what":"Method delete_incomplete_synthpop()","title":"R6 Class representing a synthetic population — SynthPop","text":"Check every synthpop file metafile index file. Delete orphan files.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"usage-4","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a synthetic population — SynthPop","text":"","code":"SynthPop$delete_incomplete_synthpop(check_checksum = TRUE)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"arguments-4","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing a synthetic population — SynthPop","text":"check_checksum  `TRUE` delete incomplete group files checksum synthpop.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"returns-4","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a synthetic population — SynthPop","text":"invisible `SynthPop` object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"method-check-integridy-","dir":"Reference","previous_headings":"","what":"Method check_integridy()","title":"R6 Class representing a synthetic population — SynthPop","text":"Check integrity (optionally delete) .fst files checking metadata readable.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"usage-5","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a synthetic population — SynthPop","text":"","code":"SynthPop$check_integridy(remove_malformed = FALSE, check_checksum = TRUE)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"arguments-5","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing a synthetic population — SynthPop","text":"remove_malformed `TRUE`, delete malformed .fst files associated files. check_checksum  `TRUE` check files checksum synthpop.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"returns-5","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a synthetic population — SynthPop","text":"invisible `SynthPop` object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"method-count-synthpop-","dir":"Reference","previous_headings":"","what":"Method count_synthpop()","title":"R6 Class representing a synthetic population — SynthPop","text":"Count synthpop files directory. includes files without metafiles index files.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"usage-6","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a synthetic population — SynthPop","text":"","code":"SynthPop$count_synthpop()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"returns-6","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a synthetic population — SynthPop","text":"invisible `SynthPop` object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"method-get-checksum-","dir":"Reference","previous_headings":"","what":"Method get_checksum()","title":"R6 Class representing a synthetic population — SynthPop","text":"Get synthpop checksum.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"usage-7","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a synthetic population — SynthPop","text":"","code":"SynthPop$get_checksum()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"arguments-6","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing a synthetic population — SynthPop","text":"x One \"\", \"synthpop\" \"metafile\". Can abbreviated.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"returns-7","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a synthetic population — SynthPop","text":"invisible `SynthPop` object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"method-get-filename-","dir":"Reference","previous_headings":"","what":"Method get_filename()","title":"R6 Class representing a synthetic population — SynthPop","text":"Get synthpop file paths.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"usage-8","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a synthetic population — SynthPop","text":"","code":"SynthPop$get_filename(x = c(\"all\", \"synthpop\", \"metafile\"))"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"arguments-7","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing a synthetic population — SynthPop","text":"x One \"\", \"synthpop\" \"metafile\". Can abbreviated.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"returns-8","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a synthetic population — SynthPop","text":"invisible `SynthPop` object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"method-get-design-","dir":"Reference","previous_headings":"","what":"Method get_design()","title":"R6 Class representing a synthetic population — SynthPop","text":"Get synthpop design.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"usage-9","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a synthetic population — SynthPop","text":"","code":"SynthPop$get_design()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"returns-9","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a synthetic population — SynthPop","text":"invisible `SynthPop` object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"method-get-dir-","dir":"Reference","previous_headings":"","what":"Method get_dir()","title":"R6 Class representing a synthetic population — SynthPop","text":"Get synthpop dir.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"usage-10","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a synthetic population — SynthPop","text":"","code":"SynthPop$get_dir()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"returns-10","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a synthetic population — SynthPop","text":"invisible `SynthPop` object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"method-gen-synthpop-demog-","dir":"Reference","previous_headings":"","what":"Method gen_synthpop_demog()","title":"R6 Class representing a synthetic population — SynthPop","text":"Generate synthpop sociodemographics, random sample population.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"usage-11","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a synthetic population — SynthPop","text":"","code":"SynthPop$gen_synthpop_demog(design_, month = \"July\")"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"arguments-8","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing a synthetic population — SynthPop","text":"design_ Design object, month April July accepted. Use July mid-year population estimates.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"returns-11","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a synthetic population — SynthPop","text":"invisible `data.table` sociodemographic information.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"method-write-synthpop-","dir":"Reference","previous_headings":"","what":"Method write_synthpop()","title":"R6 Class representing a synthetic population — SynthPop","text":"Generate synthpop files parallel, using foreach, writes disk. skips files already disk. Note: backend foreach needs initialised calling function.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"usage-12","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a synthetic population — SynthPop","text":"","code":"SynthPop$write_synthpop(mc_)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"arguments-9","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing a synthetic population — SynthPop","text":"mc_ integer vector Monte Carlo iteration synthetic population. integer generates unique synthetic population.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"returns-12","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a synthetic population — SynthPop","text":"invisible `SynthPop` object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"method-get-risks-","dir":"Reference","previous_headings":"","what":"Method get_risks()","title":"R6 Class representing a synthetic population — SynthPop","text":"Get risks individuals synthetic   population disease.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"usage-13","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a synthetic population — SynthPop","text":"","code":"SynthPop$get_risks(disease_nam)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"arguments-10","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing a synthetic population — SynthPop","text":"disease_nam disease risks returned.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"returns-13","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a synthetic population — SynthPop","text":"data.table columns pid, year, associated   risks disease_nam specified. Else list data.tables   diseases.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"method-store-risks-","dir":"Reference","previous_headings":"","what":"Method store_risks()","title":"R6 Class representing a synthetic population — SynthPop","text":"Stores disease risks individuals synthetic   population private list.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"usage-14","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a synthetic population — SynthPop","text":"","code":"SynthPop$store_risks(disease_nam)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"arguments-11","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing a synthetic population — SynthPop","text":"disease_nam disease risks stored.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"returns-14","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a synthetic population — SynthPop","text":"invisible self chaining.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"method-print-","dir":"Reference","previous_headings":"","what":"Method print()","title":"R6 Class representing a synthetic population — SynthPop","text":"Prints synthpop object metadata.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"usage-15","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a synthetic population — SynthPop","text":"","code":"SynthPop$print()"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"returns-15","dir":"Reference","previous_headings":"","what":"Returns","title":"R6 Class representing a synthetic population — SynthPop","text":"invisible `SynthPop` object.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"method-clone-","dir":"Reference","previous_headings":"","what":"Method clone()","title":"R6 Class representing a synthetic population — SynthPop","text":"objects class cloneable method.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"usage-16","dir":"Reference","previous_headings":"","what":"Usage","title":"R6 Class representing a synthetic population — SynthPop","text":"","code":"SynthPop$clone(deep = FALSE)"},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"arguments-12","dir":"Reference","previous_headings":"","what":"Arguments","title":"R6 Class representing a synthetic population — SynthPop","text":"deep Whether make deep clone.","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/reference/SynthPop.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"R6 Class representing a synthetic population — SynthPop","text":"","code":"## ------------------------------------------------ ## Method `SynthPop$new` ## ------------------------------------------------  design <- Design$new(\"./validation/design_for_trends_validation.yaml\") #> Error in base::normalizePath(sim_prm, mustWork = TRUE): path[1]=\"./validation/design_for_trends_validation.yaml\": No such file or directory POP$write_synthpop(1:6, design) #> Error: object 'POP' not found POP <- SynthPop$new(4L, design) #> Error: object 'design' not found POP$print() #> Error: object 'POP' not found POP$count_synthpop() #> Error: object 'POP' not found  POP$delete_synthpop(1L) #> Error: object 'POP' not found POP$delete_synthpop(5:6) #> Error: object 'POP' not found POP$get_filename() #> Error: object 'POP' not found"},{"path":[]},{"path":"https://christk.github.io/IMPACTncd_Japan/news/index.html","id":"new-features-0-0-1","dir":"Changelog","previous_headings":"","what":"New Features","title":"IMPACTncdJapan 0.0.1","text":"Initial release IMPACTncd-Japan microsimulation model Core simulation framework R6 classes Design, Simulation, SynthPop, Disease, Exposure Docker-based deployment reproducible analysis across platforms Comprehensive documentation vignettes users developers","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/news/index.html","id":"simulation-capabilities-0-0-1","dir":"Changelog","previous_headings":"","what":"Simulation Capabilities","title":"IMPACTncdJapan 0.0.1","text":"Lifecourse microsimulation Japanese adult population Disease modeling CHD, stroke, diabetes, COPD, lung cancer Risk factor modeling BMI, smoking, blood pressure, cholesterol, physical activity Scenario analysis framework policy evaluation Parallel processing support large-scale simulations","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/news/index.html","id":"infrastructure-0-0-1","dir":"Changelog","previous_headings":"","what":"Infrastructure","title":"IMPACTncdJapan 0.0.1","text":"C++17 backend high-performance computation Docker containers consistent execution environment GitHub Actions automated builds testing Comprehensive logging error handling Flexible YAML-based configuration system","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/news/index.html","id":"documentation-0-0-1","dir":"Changelog","previous_headings":"","what":"Documentation","title":"IMPACTncdJapan 0.0.1","text":"Quick start guide new users Detailed installation instructions Docker setup guide Scenario analysis tutorial Technical documentation developers","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/news/index.html","id":"known-issues-0-0-1","dir":"Changelog","previous_headings":"","what":"Known Issues","title":"IMPACTncdJapan 0.0.1","text":"Memory usage scales linearly population size (~12GB per core) Large simulations require substantial storage space outputs visualization features still development","code":""},{"path":"https://christk.github.io/IMPACTncd_Japan/news/index.html","id":"contributors-0-0-1","dir":"Changelog","previous_headings":"","what":"Contributors","title":"IMPACTncdJapan 0.0.1","text":"Chris Kypridemos (University Liverpool) - Lead developer Peter Crowther (Melandra Ltd) - Core infrastructure Maria Guzman-Castillo - Disease modeling Amandine Robert - Validation testing Max Birkett - Documentation Piotr Bandosz - Model design Soshiro Ogata - Japan-specific calibration","code":""}]
